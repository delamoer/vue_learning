<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue ç”Ÿå‘½å‘¨æœŸé’©å­å®Œæ•´å­¦ä¹ æŒ‡å—</title>

    <script type="text/javascript" src="../js/vue.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        #root {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            text-align: center;
            color: #999;
            margin-bottom: 30px;
            font-size: 14px;
        }

        h2 {
            color: #667eea;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 20px;
            border-left: 4px solid #667eea;
            padding-left: 10px;
        }

        h3 {
            color: #555;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .example-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .example-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .result {
            background: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            border: 1px solid #e0e0e0;
        }

        .result > div {
            margin: 8px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .label {
            color: #666;
            font-weight: 500;
            display: block;
            margin-bottom: 5px;
        }

        .value {
            color: #333;
            font-weight: bold;
            display: block;
        }

        code {
            background: #ffe6e6;
            padding: 2px 6px;
            border-radius: 3px;
            color: #e74c3c;
            font-size: 13px;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 13px;
            line-height: 1.5;
            margin: 10px 0;
        }

        .note {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }

        .note-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 5px;
        }

        .success-note {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .success-note .note-title {
            color: #155724;
        }

        .error-note {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        .error-note .note-title {
            color: #721c24;
        }

        hr {
            margin: 30px 0;
            border: none;
            border-top: 2px solid #f0f0f0;
        }

        .demo-box {
            border: 2px dashed #ddd;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            background: white;
        }

        button {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #666;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4);
        }

        input[type="text"],
        input[type="number"],
        textarea,
        select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 100%;
            font-size: 14px;
            transition: all 0.3s;
            margin: 5px 0;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .lifecycle-log {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
            font-size: 12px;
            font-family: 'Monaco', 'Courier New', monospace;
            line-height: 1.6;
        }

        .log-item {
            padding: 3px 0;
            border-bottom: 1px solid #444;
        }

        .log-item:last-child {
            border-bottom: none;
        }

        .hook-name {
            color: #66d9ef;
            font-weight: bold;
        }

        .hook-time {
            color: #a1efe4;
        }

        .hook-status {
            color: #a6e22e;
        }

        .lifecycle-diagram {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }

        .lifecycle-item {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 20px;
            margin: 8px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 13px;
        }

        .lifecycle-arrow {
            color: #667eea;
            font-size: 20px;
            font-weight: bold;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        table th {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
            background: #f5f5f5;
            font-weight: bold;
        }

        table td {
            padding: 10px;
            border: 1px solid #ddd;
        }

        table tr:hover {
            background: #f9f9f9;
        }

        .status-box {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            background: #f0f0f0;
        }

        .status-before {
            background: #ffe6e6;
            border-left: 4px solid #e74c3c;
        }

        .status-during {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
        }

        .status-after {
            background: #e8f5e9;
            border-left: 4px solid #28a745;
        }

        .comparison-table {
            width: 100%;
            margin: 15px 0;
            border-collapse: collapse;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }

        .comparison-table td {
            background: white;
        }

        .comparison-table tr:nth-child(even) td {
            background: #f8f9fa;
        }

        .hook-category {
            margin: 20px 0;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }

        .hook-category-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .hook-item {
            display: inline-block;
            background: white;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-size: 13px;
            transition: all 0.3s;
        }

        .hook-item:hover {
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }
    </style>
</head>

<body>
    <!--
      ==================== Vue ç”Ÿå‘½å‘¨æœŸé’©å­å®Œæ•´æ•™ç¨‹ ====================
      
      ä¸€ã€ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼Ÿ
        Vue å®ä¾‹æœ‰ä¸€ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½ DOMã€
        æ›´æ–°æ•°æ®ã€å¸è½½çš„æ•´ä¸ªè¿‡ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µé’©å…¥å›è°ƒå‡½æ•°ã€‚
        
      äºŒã€ç”Ÿå‘½å‘¨æœŸçš„8ä¸ªä¸»è¦é’©å­ï¼š
        1. beforeCreate - å®ä¾‹åˆ›å»ºå‰
        2. created - å®ä¾‹åˆ›å»ºå
        3. beforeMount - æŒ‚è½½å‰
        4. mounted - æŒ‚è½½å
        5. beforeUpdate - æ›´æ–°å‰
        6. updated - æ›´æ–°å
        7. beforeDestroy - é”€æ¯å‰
        8. destroyed - é”€æ¯å
        
        Vue 3.0+ æ–°å¢é’©å­ï¼š
        - setupï¼ˆæ›¿ä»£å¤§éƒ¨åˆ† created é€»è¾‘ï¼‰
        - onBeforeMountã€onMounted
        - onBeforeUpdateã€onUpdated
        - onBeforeUnmountã€onUnmounted
        
      ä¸‰ã€ç”Ÿå‘½å‘¨æœŸçš„3ä¸ªä¸»è¦é˜¶æ®µï¼š
        1. åˆå§‹åŒ–é˜¶æ®µï¼ˆInitializationï¼‰
           - beforeCreate -> created -> beforeMount -> mounted
        2. æ›´æ–°é˜¶æ®µï¼ˆUpdatingï¼‰
           - beforeUpdate -> updated
        3. é”€æ¯é˜¶æ®µï¼ˆDestructionï¼‰
           - beforeDestroy -> destroyed
           
      å››ã€å„é˜¶æ®µçš„ç‰¹ç‚¹ï¼š
        
        ã€åˆå§‹åŒ–é˜¶æ®µã€‘
        beforeCreateï¼š
          - å®ä¾‹å·²åˆ›å»ºï¼Œä½†æœªåˆå§‹åŒ–æ•°æ®
          - ä¸èƒ½è®¿é—® dataã€computedã€methods
          - è¿™ä¸ªé˜¶æ®µå‡ ä¹ä¸ç”¨
          
        createdï¼š
          - å®ä¾‹å®Œå…¨åˆ›å»ºï¼Œæ•°æ®å·²åˆå§‹åŒ–
          - å¯ä»¥è®¿é—® dataã€computedã€methods
          - é€‚åˆè¿›è¡Œ Ajax è¯·æ±‚ã€äº‹ä»¶ç›‘å¬ç­‰åˆå§‹åŒ–æ“ä½œ
          - æ­¤æ—¶ DOM è¿˜æœªæŒ‚è½½
          
        beforeMountï¼š
          - $el è¿˜æœªæŒ‚è½½åˆ°çœŸå® DOM
          - è™šæ‹Ÿ DOM å·²åˆ›å»ºï¼Œä½†æœªè½¬æ¢ä¸ºçœŸå® DOM
          
        mountedï¼š
          - å®ä¾‹å·²æŒ‚è½½ï¼Œå¯ä»¥è®¿é—®çœŸå® DOMï¼ˆ$elï¼‰
          - é€‚åˆè¿›è¡Œ DOM æ“ä½œã€åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“ (echarts, leaflet)
          
        ã€æ›´æ–°é˜¶æ®µã€‘
        beforeUpdateï¼š
          - æ•°æ®æ›´æ–°äº†ï¼Œä½† DOM è¿˜æœªé‡æ–°æ¸²æŸ“
          - å¯ä»¥åœ¨æ›´æ–°å‰è¿›è¡ŒæŸäº›æ£€æŸ¥æˆ–è®°å½•
          
        updatedï¼š
          - æ•°æ®æ›´æ–°ï¼ŒDOM å·²é‡æ–°æ¸²æŸ“
          - å¯ä»¥è¿›è¡Œä¾èµ–äº DOM çš„æ“ä½œ
          - âš ï¸ é¿å…åœ¨æ­¤å¤„ä¿®æ”¹æ•°æ®ï¼ˆä¼šå¯¼è‡´æ— é™å¾ªç¯ï¼‰
          
        ã€é”€æ¯é˜¶æ®µã€‘
        beforeDestroyï¼š
          - å®ä¾‹é”€æ¯å‰ï¼Œæ­¤æ—¶å®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨
          - åº”è¯¥åœ¨æ­¤å¤„æ¸…ç†èµ„æºï¼ˆç§»é™¤äº‹ä»¶ç›‘å¬ã€å…³é—­å®šæ—¶å™¨ç­‰ï¼‰
          
        destroyedï¼š
          - å®ä¾‹å·²é”€æ¯ï¼Œæ‰€æœ‰äº‹ä»¶ç›‘å¬å’Œå®šæ—¶å™¨éƒ½åº”è¯¥å·²æ¸…ç†
          - Vue å®ä¾‹ä¸ DOM çš„è¿æ¥å·²æ–­å¼€
          
      äº”ã€å¸¸è§æ“ä½œåœ¨ç”Ÿå‘½å‘¨æœŸçš„æœ€ä½³ä½ç½®ï¼š
        
        åˆå§‹åŒ–æ•°æ®ï¼šcreated æˆ– beforeCreateï¼ˆä¸æ¨èï¼‰
        å‘é€ Ajax è¯·æ±‚ï¼šcreated æˆ– mounted
          - createdï¼šæ›´æ—©è·å¾—æ•°æ®
          - mountedï¼šç¡®ä¿ DOM å·²å‡†å¤‡å¥½
        åˆå§‹åŒ– DOMï¼šmounted
        è®¿é—® DOMï¼šmounted æˆ– updated
        æ·»åŠ äº‹ä»¶ç›‘å¬ï¼šmounted
        ç§»é™¤äº‹ä»¶ç›‘å¬ï¼šbeforeDestroy
        æ¸…ç†å®šæ—¶å™¨ï¼šbeforeDestroy
        åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“ï¼šmounted
  -->
    <div id="root">
        <h1>ğŸ¯ Vue ç”Ÿå‘½å‘¨æœŸé’©å­å®Œæ•´å­¦ä¹ æŒ‡å—</h1>
        <p class="subtitle">Lifecycle Hooks - æŒæ¡å®ä¾‹çš„å®Œæ•´ç”Ÿå‘½è¿‡ç¨‹</p>

        <!-- ========== 1. ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ ========== -->
        <h2>ğŸ“Š 1. Vue ç”Ÿå‘½å‘¨æœŸå…¨æ™¯å›¾</h2>
        <div class="example-box">
            <div class="example-title">Vue å®ä¾‹ç”Ÿå‘½å‘¨æœŸçš„8ä¸ªå…³é”®æ—¶åˆ»</div>
            <div class="lifecycle-diagram">
                <div class="lifecycle-item">new Vue()</div>
                <div class="lifecycle-arrow">â¬‡ï¸</div>
                
                <div class="lifecycle-item">beforeCreate</div>
                <div class="lifecycle-arrow">â¬‡ï¸</div>
                
                <div class="lifecycle-item">created</div>
                <div class="lifecycle-arrow">â¬‡ï¸</div>
                
                <div class="lifecycle-item">beforeMount</div>
                <div class="lifecycle-arrow">â¬‡ï¸</div>
                
                <div class="lifecycle-item">mounted</div>
                <div class="lifecycle-arrow">â¬‡ï¸</div>
                <br />
                
                <div style="color: #999; font-size: 12px; margin: 10px 0;">ç›‘å¬åˆ°æ•°æ®å˜åŒ– â¬‡ï¸</div>
                
                <div class="lifecycle-item" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">beforeUpdate</div>
                <div class="lifecycle-arrow">â¬‡ï¸</div>
                
                <div class="lifecycle-item" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">updated</div>
                <div class="lifecycle-arrow">â¬‡ï¸</div>

                <div style="color: #999; font-size: 12px; margin: 10px 0;">è°ƒç”¨ $destroy æˆ–ç»„ä»¶å¸è½½ â¬‡ï¸</div>

                <div class="lifecycle-item" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: #333;">beforeDestroy</div>
                <div class="lifecycle-arrow">â¬‡ï¸</div>
                
                <div class="lifecycle-item" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: #333;">destroyed</div>
            </div>
        </div>

        <div class="note">
            <div class="note-title">ğŸ’¡ 3 ä¸ªä¸»è¦é˜¶æ®µ</div>
            <table class="comparison-table">
                <tr>
                    <th>é˜¶æ®µåç§°</th>
                    <th>åŒ…å«é’©å­</th>
                    <th>ä¸»è¦ç‰¹ç‚¹</th>
                </tr>
                <tr>
                    <td><strong>åˆå§‹åŒ–é˜¶æ®µ</strong></td>
                    <td>beforeCreate â†’ created â†’ beforeMount â†’ mounted</td>
                    <td>å®ä¾‹åˆ›å»ºã€æ•°æ®åˆå§‹åŒ–ã€DOM æŒ‚è½½</td>
                </tr>
                <tr>
                    <td><strong>æ›´æ–°é˜¶æ®µ</strong></td>
                    <td>beforeUpdate â†’ updated</td>
                    <td>å“åº”å¼æ•°æ®å˜åŒ–ã€DOM æ›´æ–°</td>
                </tr>
                <tr>
                    <td><strong>é”€æ¯é˜¶æ®µ</strong></td>
                    <td>beforeDestroy â†’ destroyed</td>
                    <td>æ¸…ç†èµ„æºã€å¸è½½å®ä¾‹</td>
                </tr>
            </table>
        </div>

        <hr />

        <!-- ========== 2. åˆå§‹åŒ–é˜¶æ®µè¯¦è§£ ========== -->
        <h2>ğŸš€ 2. åˆå§‹åŒ–é˜¶æ®µè¯¦è§£</h2>
        <div class="example-box">
            <div class="example-title">ä» new Vue() åˆ° mounted çš„è¿‡ç¨‹</div>

            <h3>beforeCreateï¼ˆåˆ›å»ºå‰ï¼‰- æœ€æ—©çš„é’©å­</h3>
            <pre v-pre>new Vue({
  beforeCreate() {
    console.log('1ï¸âƒ£ beforeCreate - å®ä¾‹å°šæœªåˆå§‹åŒ–');
    console.log('data:', this.data);        // undefined
    console.log('methods:', this.methods);  // undefined
    console.log('$el:', this.$el);          // undefined
  }
});</pre>

            <div class="status-box status-before">
                <strong>æ­¤æ—¶çš„çŠ¶æ€ï¼š</strong>
                <ul style="margin-left: 20px; margin-top: 8px;">
                    <li>âŒ æ— æ³•è®¿é—® data</li>
                    <li>âŒ æ— æ³•è®¿é—® methods</li>
                    <li>âŒ æ— æ³•è®¿é—®è®¡ç®—å±æ€§</li>
                    <li>âŒ æ— æ³•è®¿é—® $el</li>
                    <li>âœ… å®ä¾‹åˆšå¥½è¢«åˆ›å»º</li>
                </ul>
            </div>

            <hr style="margin: 20px 0;" />

            <h3>createdï¼ˆåˆ›å»ºåï¼‰- æ•°æ®åˆå§‹åŒ–å®Œæˆ</h3>
            <pre v-pre>new Vue({
  data() {
    return { count: 0 }
  },
  created() {
    console.log('2ï¸âƒ£ created - å®ä¾‹å·²åˆå§‹åŒ–');
    console.log('this.count:', this.count);    // 0
    console.log('$el:', this.$el);              // undefinedï¼ˆDOM è¿˜æœªæŒ‚è½½ï¼‰
    
    // è¿™é‡Œé€‚åˆåšï¼š
    // - åˆå§‹åŒ–æ•°æ®
    // - å‘é€ Ajax è¯·æ±‚
    // - è®¾ç½®äº‹ä»¶ç›‘å¬
  }
});</pre>

            <div class="status-box status-during">
                <strong>æ­¤æ—¶çš„çŠ¶æ€ï¼š</strong>
                <ul style="margin-left: 20px; margin-top: 8px;">
                    <li>âœ… æ•°æ®å·²åˆå§‹åŒ–</li>
                    <li>âœ… å¯è®¿é—® methods å’Œè®¡ç®—å±æ€§</li>
                    <li>âœ… å¯è®¿é—®å“åº”å¼æ•°æ®</li>
                    <li>âŒ DOM æœªæŒ‚è½½ï¼ˆ$el ä¸º undefinedï¼‰</li>
                    <li>âŒ é¡µé¢è¿˜çœ‹ä¸åˆ°å†…å®¹</li>
                </ul>
            </div>

            <hr style="margin: 20px 0;" />

            <h3>beforeMountï¼ˆæŒ‚è½½å‰ï¼‰- æ¨¡æ¿ç¼–è¯‘å®Œæˆ</h3>
            <pre v-pre>new Vue({
  beforeMount() {
    console.log('3ï¸âƒ£ beforeMount - é¡µé¢å³å°†æŒ‚è½½');
    console.log('html:', this.$el.innerHTML);  // åŸå§‹ HTMLï¼ˆæœªç¼–è¯‘ï¼‰
    console.log('data:', this.message);        // âœ… å¯ä»¥è®¿é—®
    
    // æ­¤æ—¶è™šæ‹Ÿ DOM å·²åˆ›å»ºï¼Œä½†æœªè½¬æ¢ä¸ºçœŸå® DOM
  }
});</pre>

            <div class="status-box status-during">
                <strong>æ­¤æ—¶çš„çŠ¶æ€ï¼š</strong>
                <ul style="margin-left: 20px; margin-top: 8px;">
                    <li>âœ… è™šæ‹Ÿ DOM å·²åˆ›å»º</li>
                    <li>âœ… å¯è®¿é—®æ‰€æœ‰æ•°æ®</li>
                    <li>âš ï¸ çœŸå® DOM è¿˜æœªç”Ÿæˆ</li>
                    <li>âŒ é¡µé¢è¿˜çœ‹ä¸åˆ°å†…å®¹</li>
                </ul>
            </div>

            <hr style="margin: 20px 0;" />

            <h3>mountedï¼ˆæŒ‚è½½åï¼‰- æœ€å¸¸ç”¨çš„é’©å­</h3>
            <pre v-pre>new Vue({
  mounted() {
    console.log('4ï¸âƒ£ mounted - é¡µé¢å·²æŒ‚è½½åˆ° DOM');
    console.log('$el:', this.$el);                    // âœ… å¯ä»¥è®¿é—®çœŸå® DOM
    console.log('html:', this.$el.innerHTML);        // âœ… å¯ä»¥çœ‹åˆ°ç¼–è¯‘åçš„ HTML
    console.log('dom elements:', this.$refs);        // âœ… å¯ä»¥è®¿é—® ref å…ƒç´ 
    
    // è¿™é‡Œæœ€é€‚åˆåšï¼š
    // - DOM æ“ä½œ
    // - åˆå§‹åŒ– jQueryã€echarts ç­‰ç¬¬ä¸‰æ–¹åº“
    // - ä¸º DOM æ·»åŠ äº‹ä»¶ç›‘å¬
  }
});</pre>

            <div class="status-box status-after">
                <strong>æ­¤æ—¶çš„çŠ¶æ€ï¼š</strong>
                <ul style="margin-left: 20px; margin-top: 8px;">
                    <li>âœ… çœŸå® DOM å·²æŒ‚è½½</li>
                    <li>âœ… $el å¯ç”¨</li>
                    <li>âœ… å¯ä»¥è¿›è¡Œæ‰€æœ‰ DOM æ“ä½œ</li>
                    <li>âœ… ç¬¬ä¸‰æ–¹åº“åˆå§‹åŒ–çš„æœ€ä½³æ—¶æœº</li>
                    <li>âœ… é¡µé¢å·²å®Œå…¨æ¸²æŸ“</li>
                </ul>
            </div>
        </div>

        <div class="result">
            <div style="background: white; padding: 15px; border-radius: 5px; border: 1px solid #e0e0e0;">
                <span class="label">ğŸ“ åˆå§‹åŒ–é˜¶æ®µæ¼”ç¤ºï¼ˆæŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼‰ï¼š</span>
                <button class="btn-primary" @click="createInitDemo">åˆ›å»ºæ–°çš„åˆå§‹åŒ–æ¼”ç¤º</button>
                <p style="margin-top: 10px; font-size: 13px; color: #666;">ç‚¹å‡»æŒ‰é’®ä¼š new ä¸€ä¸ªå…¨æ–°çš„ Vue å®ä¾‹ï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºçš„å„ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­è°ƒç”¨é¡ºåºã€‚</p>
            </div>
        </div>

        <hr />

        <!-- ========== 3. æ›´æ–°é˜¶æ®µè¯¦è§£ ========== -->
        <h2>ğŸ”„ 3. æ›´æ–°é˜¶æ®µè¯¦è§£</h2>
        <div class="example-box">
            <div class="example-title">å“åº”å¼æ•°æ®å˜åŒ–è§¦å‘çš„ä¸¤ä¸ªé’©å­</div>

            <h3>beforeUpdateï¼ˆæ›´æ–°å‰ï¼‰- æ•°æ®å˜äº†ï¼Œé¡µé¢è¿˜æ²¡å˜</h3>
            <pre v-pre>new Vue({
  data() {
    return { count: 0 }
  },
  beforeUpdate() {
    console.log('beforeUpdate - æ•°æ®å·²å˜ï¼Œä½† DOM æœªæ›´æ–°');
    console.log('this.count:', this.count);          // âœ… æ–°å€¼
    console.log('DOM ä¸­æ˜¾ç¤ºçš„å€¼:', this.$el.innerHTML);  // âŒ æ—§å€¼
    
    // å¯ä»¥åœ¨è¿™é‡Œæ£€æŸ¥å°†è¦è¿›è¡Œä»€ä¹ˆæ”¹åŠ¨
    // ä½†ä¸è¦ä¿®æ”¹æ•°æ®ï¼ˆä¼šå¯¼è‡´æ­»å¾ªç¯ï¼‰
  }
});</pre>

            <div class="status-box status-before">
                <strong>æ­¤æ—¶çš„çŠ¶æ€ï¼š</strong>
                <ul style="margin-left: 20px; margin-top: 8px;">
                    <li>âœ… å“åº”å¼æ•°æ®å·²æ›´æ–°</li>
                    <li>âœ… è®¡ç®—å±æ€§å·²é‡ç®—</li>
                    <li>âŒ DOM è¿˜æœªæ›´æ–°</li>
                    <li>âŒ é¡µé¢çœ‹ä¸åˆ°æ–°å€¼</li>
                    <li>âš ï¸ ä¸è¦ä¿®æ”¹æ•°æ®ï¼ˆä¼šå¯¼è‡´æ­»å¾ªç¯ï¼‰</li>
                </ul>
            </div>

            <hr style="margin: 20px 0;" />

            <h3>updatedï¼ˆæ›´æ–°åï¼‰- æ•°æ®å’Œé¡µé¢éƒ½å·²æ›´æ–°</h3>
            <pre v-pre>new Vue({
  data() {
    return { count: 0 }
  },
  updated() {
    console.log('updated - é¡µé¢å·²æ›´æ–°');
    console.log('this.count:', this.count);          // âœ… æ–°å€¼
    console.log('DOM ä¸­æ˜¾ç¤ºçš„å€¼:', this.$el.innerHTML);  // âœ… æ–°å€¼
    
    // è¿™é‡Œå¯ä»¥è¿›è¡Œä¾èµ–äº DOM çš„æ“ä½œ
    // ä½†ä»ç„¶è¦å°å¿ƒï¼Œé¿å…ä¿®æ”¹æ•°æ®å¯¼è‡´æ­»å¾ªç¯
  }
});</pre>

            <div class="status-box status-after">
                <strong>æ­¤æ—¶çš„çŠ¶æ€ï¼š</strong>
                <ul style="margin-left: 20px; margin-top: 8px;">
                    <li>âœ… å“åº”å¼æ•°æ®å·²æ›´æ–°</li>
                    <li>âœ… DOM å·²é‡æ–°æ¸²æŸ“</li>
                    <li>âœ… é¡µé¢æ˜¾ç¤ºæœ€æ–°å€¼</li>
                    <li>âœ… å¯ä»¥è¿›è¡Œ DOM ç›¸å…³æ“ä½œ</li>
                    <li>âš ï¸ é¿å…ä¿®æ”¹æ•°æ®</li>
                </ul>
            </div>
        </div>

        <div class="result">
            <div style="background: white; padding: 15px; border-radius: 5px; border: 1px solid #e0e0e0;">
                <span class="label">ğŸ“ æ›´æ–°é˜¶æ®µæ¼”ç¤ºï¼š</span>
                <div style="margin-top: 10px;">
                    <p>å½“å‰è®¡æ•°ï¼š<strong style="color: #667eea; font-size: 18px;">{{ updateCounter }}</strong></p>
                    <button class="btn-primary" @click="updateCounter++">å¢åŠ è®¡æ•°</button>
                    <button class="btn-secondary" @click="updateCounter--">å‡å°‘è®¡æ•°</button>
                    <button class="btn-danger" @click="clearUpdateLog">æ¸…ç©ºæ—¥å¿—</button>
                </div>
                <div class="lifecycle-log">
                    <div v-if="updateLog.length === 0" style="color: #999; text-align: center; padding: 20px;">
                        ä¿®æ”¹ä¸Šé¢çš„è®¡æ•°å€¼ï¼Œè§‚å¯Ÿç”Ÿå‘½å‘¨æœŸæ—¥å¿—...
                    </div>
                    <div v-for="(log, index) in updateLog" :key="index" class="log-item">
                        <span class="hook-time">{{ log.time }}</span> 
                        <span class="hook-name">{{ log.hook }}</span> 
                        <span class="hook-status">{{ log.message }}</span>
                    </div>
                </div>
            </div>
        </div>

        <hr />

        <!-- ========== 4. é”€æ¯é˜¶æ®µè¯¦è§£ ========== -->
        <h2>ğŸ—‘ï¸ 4. é”€æ¯é˜¶æ®µè¯¦è§£</h2>
        <div class="example-box">
            <div class="example-title">æ¸…ç†èµ„æºçš„æœ€åæ—¶åˆ»</div>

            <h3>beforeDestroyï¼ˆé”€æ¯å‰ï¼‰- æœ€åçš„æ¸…ç†æœºä¼š</h3>
            <pre v-pre>new Vue({
  mounted() {
    // æ·»åŠ äº‹ä»¶ç›‘å¬
    this.handleResize = () => console.log('çª—å£å¤§å°æ”¹å˜');
    window.addEventListener('resize', this.handleResize);
  },
  beforeDestroy() {
    console.log('beforeDestroy - å…³é”®ï¼åº”è¯¥åœ¨è¿™é‡Œæ¸…ç†èµ„æº');
    
    // âœ… ç§»é™¤äº‹ä»¶ç›‘å¬
    window.removeEventListener('resize', this.handleResize);
    
    // âœ… æ¸…ç†å®šæ—¶å™¨
    clearInterval(this.timer);
    clearTimeout(this.timeout);
    
    // âœ… å–æ¶ˆ Ajax è¯·æ±‚
    if (this.request) {
      this.request.cancel();
    }
    
    // âœ… é”€æ¯ç¬¬ä¸‰æ–¹åº“
    if (this.chart) {
      this.chart.dispose();  // echarts
    }
    
    // æ­¤æ—¶å®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨
  }
});</pre>

            <div class="status-box status-before">
                <strong>æ­¤æ—¶çš„çŠ¶æ€ï¼š</strong>
                <ul style="margin-left: 20px; margin-top: 8px;">
                    <li>âœ… å®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨</li>
                    <li>âœ… æ‰€æœ‰æ•°æ®å’Œæ–¹æ³•ä»å¯è®¿é—®</li>
                    <li>âœ… æœ€åçš„æ¸…ç†æœºä¼š</li>
                    <li>âŒ å³å°†é”€æ¯</li>
                </ul>
            </div>

            <hr style="margin: 20px 0;" />

            <h3>destroyedï¼ˆé”€æ¯åï¼‰- ä¸€åˆ‡å·²æ–­å¼€è¿æ¥</h3>
            <pre v-pre>new Vue({
  destroyed() {
    console.log('destroyed - å®ä¾‹å·²é”€æ¯');
    
    // âŒ æ‰€æœ‰äº‹ä»¶ç›‘å¬éƒ½åº”è¯¥å·²ç§»é™¤
    // âŒ æ‰€æœ‰å®šæ—¶å™¨éƒ½åº”è¯¥å·²æ¸…ç†
    // âŒ Vue å®ä¾‹ä¸ DOM çš„è¿æ¥å·²æ–­å¼€
    // âŒ å“åº”å¼ç³»ç»Ÿå·²åœæ­¢å·¥ä½œ
  }
});</pre>

            <div class="status-box status-after">
                <strong>æ­¤æ—¶çš„çŠ¶æ€ï¼š</strong>
                <ul style="margin-left: 20px; margin-top: 8px;">
                    <li>âœ… å®ä¾‹å·²é”€æ¯</li>
                    <li>âŒ å“åº”å¼æ•°æ®å·²ç§»é™¤</li>
                    <li>âŒ æ‰€æœ‰äº‹ä»¶ç›‘å¬å·²ç§»é™¤</li>
                    <li>âŒ ä¸åº”è¯¥å†ä¿®æ”¹æ•°æ®</li>
                </ul>
            </div>
        </div>

        <div class="result">
            <div style="background: white; padding: 15px; border-radius: 5px; border: 1px solid #e0e0e0;">
                <span class="label">ğŸ“ é”€æ¯é˜¶æ®µæ¼”ç¤ºï¼š</span>
                <div style="margin-top: 10px;">
                    <p>é”€æ¯æ¼”ç¤ºå®ä¾‹ï¼š{{ destroyShowText }}</p>
                    <button class="btn-primary" @click="createDestroyDemo">åˆ›å»ºé”€æ¯æ¼”ç¤ºå®ä¾‹</button>
                    <button class="btn-danger" @click="destroyDemo" v-if="showDestroyText">é”€æ¯å®ä¾‹ ($destroy)</button>
                    <p style="margin-top: 10px; font-size: 13px; color: #666;">ç‚¹å‡»æŒ‰é’®åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œç„¶åé”€æ¯å®ƒï¼Œè§‚å¯Ÿæ§åˆ¶å°çš„é’©å­è°ƒç”¨ã€‚</p>
                </div>
            </div>
        </div>

        <hr />

        <!-- ========== 5. å¸¸è§æ“ä½œåœ¨å„é˜¶æ®µçš„æœ€ä½³ä½ç½® ========== -->
        <h2>ğŸ“‹ 5. å¸¸è§æ“ä½œåœ¨ç”Ÿå‘½å‘¨æœŸçš„æœ€ä½³ä½ç½®</h2>
        <div class="example-box">
            <div class="example-title">æ¥çœ‹çœ‹å„ä¸ªå¸¸è§æ“ä½œåº”è¯¥æ”¾åœ¨å“ªä¸ªé’©å­é‡Œ</div>

            <table class="comparison-table">
                <tr>
                    <th>å¸¸è§æ“ä½œ</th>
                    <th>æœ€ä½³ä½ç½®</th>
                    <th>å¤‡ç”¨ä½ç½®</th>
                    <th>è¯´æ˜</th>
                </tr>
                <tr>
                    <td><strong>åˆå§‹åŒ–æ•°æ®</strong></td>
                    <td>created</td>
                    <td>beforeCreateï¼ˆå¾ˆå°‘ç”¨ï¼‰</td>
                    <td>æ•°æ®å·²åˆå§‹åŒ–ï¼Œå¯ç«‹å³ä½¿ç”¨</td>
                </tr>
                <tr>
                    <td><strong>å‘é€ Ajax</strong></td>
                    <td>created æˆ– mounted</td>
                    <td>-</td>
                    <td>created æ›´æ—©è·å¾—æ•°æ®ï¼›mounted ç¡®ä¿ DOM å°±ç»ª</td>
                </tr>
                <tr>
                    <td><strong>DOM æ“ä½œ</strong></td>
                    <td>mounted æˆ– updated</td>
                    <td>-</td>
                    <td>éœ€è¦çœŸå® DOMï¼Œä¸èƒ½åœ¨ created</td>
                </tr>
                <tr>
                    <td><strong>ç¬¬ä¸‰æ–¹åº“åˆå§‹åŒ–</strong></td>
                    <td>mounted</td>
                    <td>-</td>
                    <td>å¦‚ echartsã€swiperï¼Œéœ€è¦çœŸå® DOM</td>
                </tr>
                <tr>
                    <td><strong>äº‹ä»¶ç›‘å¬æ·»åŠ </strong></td>
                    <td>mounted</td>
                    <td>-</td>
                    <td>éœ€è¦çœŸå® DOM å¯¹è±¡</td>
                </tr>
                <tr>
                    <td><strong>äº‹ä»¶ç›‘å¬ç§»é™¤</strong></td>
                    <td>beforeDestroy</td>
                    <td>-</td>
                    <td>é˜²æ­¢å†…å­˜æ³„æ¼</td>
                </tr>
                <tr>
                    <td><strong>å®šæ—¶å™¨æ¸…ç†</strong></td>
                    <td>beforeDestroy</td>
                    <td>-</td>
                    <td>å¿…é¡»æ¸…ç†ï¼Œå¦åˆ™ä¼šç»§ç»­è¿è¡Œ</td>
                </tr>
                <tr>
                    <td><strong>å–æ¶ˆ Ajax è¯·æ±‚</strong></td>
                    <td>beforeDestroy</td>
                    <td>-</td>
                    <td>é¿å…è¯·æ±‚å®Œæˆåæ•°æ®æ··ä¹±</td>
                </tr>
            </table>
        </div>

        <div class="note success-note">
            <div class="note-title">âœ… æœ€å¸¸ç”¨çš„ç»„åˆ</div>
            <pre v-pre>// æœ€å¸¸è§çš„ä½¿ç”¨æ¨¡å¼
new Vue({
  data() {
    return { items: [] }
  },
  
  created() {
    // 1. å‘é€ Ajax è·å–æ•°æ®
    this.fetchData();
  },
  
  mounted() {
    // 2. åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“
    this.initChart();
    
    // 3. æ·»åŠ äº‹ä»¶ç›‘å¬
    window.addEventListener('resize', this.handleResize);
  },
  
  beforeDestroy() {
    // 4. æ¸…ç†èµ„æº
    window.removeEventListener('resize', this.handleResize);
    if (this.chart) {
      this.chart.dispose();
    }
  },
  
  methods: {
    fetchData() { /* ... */ },
    initChart() { /* ... */ },
    handleResize() { /* ... */ }
  }
});</pre>
        </div>

        <hr />

        <!-- ========== 6. ç”Ÿå‘½å‘¨æœŸé’©å­è¯¦ç»†å¯¹æ¯”è¡¨ ========== -->
        <h2>ğŸ” 6. 8 ä¸ªé’©å­çš„è¯¦ç»†å¯¹æ¯”</h2>
        <div class="example-box">
            <div class="example-title">å¿«é€ŸæŸ¥é˜…å„é’©å­çš„å±æ€§å’Œä½¿ç”¨åœºæ™¯</div>

            <table>
                <tr>
                    <th>é’©å­å‡½æ•°</th>
                    <th>è°ƒç”¨æ—¶æœº</th>
                    <th>èƒ½è®¿é—®çš„å†…å®¹</th>
                    <th>å¸¸è§ç”¨é€”</th>
                    <th>ä½¿ç”¨é¢‘ç‡</th>
                </tr>
                <tr>
                    <td><code>beforeCreate</code></td>
                    <td>å®ä¾‹åˆ›å»ºå‰</td>
                    <td>å‡ ä¹ä»€ä¹ˆéƒ½ä¸èƒ½è®¿é—®</td>
                    <td>å‡ ä¹ä¸ç”¨</td>
                    <td>â­</td>
                </tr>
                <tr>
                    <td><code>created</code></td>
                    <td>å®ä¾‹åˆ›å»ºå</td>
                    <td>dataã€methodsã€computedã€$watch</td>
                    <td>åˆå§‹åŒ–ã€Ajax è¯·æ±‚ã€äº‹ä»¶ç›‘å¬</td>
                    <td>â­â­â­â­â­</td>
                </tr>
                <tr>
                    <td><code>beforeMount</code></td>
                    <td>æŒ‚è½½å‰</td>
                    <td>è™šæ‹Ÿ DOM å·²åˆ›å»º</td>
                    <td>ä¸€èˆ¬ä¸ç”¨</td>
                    <td>â­</td>
                </tr>
                <tr>
                    <td><code>mounted</code></td>
                    <td>æŒ‚è½½å</td>
                    <td>$elã€çœŸå® DOMã€$refs</td>
                    <td>DOM æ“ä½œã€ç¬¬ä¸‰æ–¹åº“åˆå§‹åŒ–</td>
                    <td>â­â­â­â­â­</td>
                </tr>
                <tr>
                    <td><code>beforeUpdate</code></td>
                    <td>æ›´æ–°å‰</td>
                    <td>æ–°æ•°æ®ã€æ—§ DOM</td>
                    <td>è®°å½•çŠ¶æ€ã€æ‰§è¡Œå‰ç½®æ£€æŸ¥</td>
                    <td>â­â­</td>
                </tr>
                <tr>
                    <td><code>updated</code></td>
                    <td>æ›´æ–°å</td>
                    <td>æ–°æ•°æ®ã€æ–° DOM</td>
                    <td>DOM ç›¸å…³æ“ä½œï¼ˆè°¨æ…ï¼‰</td>
                    <td>â­â­â­</td>
                </tr>
                <tr>
                    <td><code>beforeDestroy</code></td>
                    <td>é”€æ¯å‰</td>
                    <td>æ‰€æœ‰æ•°æ®ä»å¯ç”¨</td>
                    <td>èµ„æºæ¸…ç†ã€ç§»é™¤ç›‘å¬</td>
                    <td>â­â­â­â­â­</td>
                </tr>
                <tr>
                    <td><code>destroyed</code></td>
                    <td>é”€æ¯å</td>
                    <td>å¾ˆå°‘ä½¿ç”¨</td>
                    <td>å‡ ä¹ä¸ç”¨</td>
                    <td>â­</td>
                </tr>
            </table>
        </div>

        <hr />

        <!-- ========== 7. å®Œæ•´å®æˆ˜æ¡ˆä¾‹ ========== -->
        <h2>ğŸ’¡ 7. å®Œæ•´å®æˆ˜æ¡ˆä¾‹ï¼šç”¨æˆ·åˆ—è¡¨ç»„ä»¶</h2>
        <div class="example-box">
            <div class="example-title">æ¼”ç¤ºç”Ÿå‘½å‘¨æœŸåœ¨çœŸå®é¡¹ç›®ä¸­çš„åº”ç”¨</div>

            <pre v-pre>// å®Œæ•´çš„ç”¨æˆ·åˆ—è¡¨ç»„ä»¶
new Vue({
  el: '#user-list',
  data() {
    return {
      users: [],
      loading: false,
      error: null,
      page: 1
    }
  },
  
  // ã€åˆå§‹åŒ–é˜¶æ®µã€‘
  created() {
    console.log('created: åˆå§‹åŒ–ç»„ä»¶');
    // 1. ç¬¬ä¸€æ¬¡åŠ è½½æ•°æ®
    this.fetchUsers();
    // 2. æ·»åŠ å…¨å±€æ»šåŠ¨ç›‘å¬ï¼ˆåˆ†é¡µï¼‰
    this.handleScroll = this.onWindowScroll.bind(this);
  },
  
  mounted() {
    console.log('mounted: æŒ‚è½½å®Œæˆ');
    // 1. æ·»åŠ æ»šåŠ¨äº‹ä»¶ç›‘å¬ï¼ˆéœ€è¦çœŸå® DOMï¼‰
    window.addEventListener('scroll', this.handleScroll);
    // 2. åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“
    this.initTooltip();
  },
  
  // ã€æ›´æ–°é˜¶æ®µã€‘
  beforeUpdate() {
    console.log('beforeUpdate: æ•°æ®å³å°†æ›´æ–°ï¼Œè®°å½•å½“å‰çŠ¶æ€');
    // å¯ä»¥ä¿å­˜æ»šåŠ¨ä½ç½®ã€ç„¦ç‚¹ç­‰
  },
  
  updated() {
    console.log('updated: é¡µé¢å·²æ›´æ–°');
    // å¯ä»¥è¿›è¡Œ DOM ç›¸å…³çš„æ“ä½œ
    // æ³¨æ„ï¼šä¸è¦ä¿®æ”¹æ•°æ®ï¼Œä¼šå¯¼è‡´æ­»å¾ªç¯
  },
  
  // ã€é”€æ¯é˜¶æ®µã€‘
  beforeDestroy() {
    console.log('beforeDestroy: æ¸…ç†èµ„æº');
    // 1. ç§»é™¤äº‹ä»¶ç›‘å¬ âœ…
    window.removeEventListener('scroll', this.handleScroll);
    // 2. å–æ¶ˆ Ajax è¯·æ±‚ âœ…
    if (this.fetchRequest) {
      this.fetchRequest.cancel();
    }
    // 3. æ¸…ç†å®šæ—¶å™¨ âœ…
    clearTimeout(this.timer);
    // 4. é”€æ¯ç¬¬ä¸‰æ–¹åº“ âœ…
    this.tooltip && this.tooltip.dispose();
  },
  
  methods: {
    async fetchUsers() {
      try {
        this.loading = true;
        // æ¨¡æ‹Ÿ Ajax è¯·æ±‚
        let response = await fetch(`/api/users?page=${this.page}`);
        this.users = await response.json();
        this.error = null;
      } catch (err) {
        this.error = err.message;
      } finally {
        this.loading = false;
      }
    },
    
    onWindowScroll() {
      // æ£€æŸ¥æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œå¦‚æœæ˜¯ï¼ŒåŠ è½½æ›´å¤š
      if (this.isScrollAtBottom()) {
        this.page++;
        this.fetchUsers();
      }
    },
    
    isScrollAtBottom() {
      return window.innerHeight + window.scrollY >= document.body.offsetHeight;
    },
    
    initTooltip() {
      // åˆå§‹åŒ– Tooltipã€Popover ç­‰
    }
  }
});</pre>

            <div style="margin-top: 20px; padding: 15px; background: #f0f0f0; border-radius: 5px;">
                <strong>è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºäº†ï¼š</strong>
                <ul style="margin-left: 20px; margin-top: 8px;">
                    <li>createdï¼šåˆå§‹åŒ–æ•°æ®ã€ç¬¬ä¸€æ¬¡ Ajax è¯·æ±‚</li>
                    <li>mountedï¼šæ·»åŠ  DOM äº‹ä»¶ã€åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“</li>
                    <li>beforeDestroyï¼šç§»é™¤ç›‘å¬ã€å–æ¶ˆè¯·æ±‚ã€æ¸…ç†å®šæ—¶å™¨</li>
                </ul>
            </div>
        </div>

        <hr />

        <!-- ========== 8. å¸¸è§æ³¨æ„äº‹é¡¹ ========== -->
        <h2>âš ï¸ 8. å¸¸è§æ³¨æ„äº‹é¡¹å’Œé™·é˜±</h2>
        <div class="example-box">
            <div class="example-title">é¿å…åœ¨ç”Ÿå‘½å‘¨æœŸä¸­è¸©å‘</div>

            <h3>âŒ é™·é˜± 1ï¼šåœ¨ updated ä¸­ä¿®æ”¹æ•°æ®å¯¼è‡´æ­»å¾ªç¯</h3>
            <pre v-pre>// âŒ é”™è¯¯ç¤ºä¾‹ï¼šä¼šå¯¼è‡´æ­»å¾ªç¯ï¼
new Vue({
  data() {
    return { count: 0 }
  },
  updated() {
    this.count++;  // âŒ ä¿®æ”¹æ•°æ® -> è§¦å‘æ›´æ–° -> å†æ¬¡æ‰§è¡Œ updated -> å†æ¬¡ä¿®æ”¹æ•°æ®...
  }
});</pre>

            <div class="error-note">
                <div class="note-title">å¦‚ä½•ä¿®å¤ï¼Ÿ</div>
                <pre v-pre>// âœ… æ­£ç¡®åšæ³•1ï¼šæ”¹ç”¨ watch
watch: {
  count() {
    // å“åº”å¼åœ°å¤„ç†æ•°æ®å˜åŒ–
  }
}

// âœ… æ­£ç¡®åšæ³•2ï¼šè®¾ç½®æ ‡å¿—ä½é˜²æ­¢é‡å¤
updated() {
  if (!this.isUpdating) {
    this.isUpdating = true;
    // åšä¸€äº› DOM æ“ä½œ
  }
}</pre>
            </div>

            <hr style="margin: 20px 0;" />

            <h3>âŒ é™·é˜± 2ï¼šåœ¨ beforeDestroy ä¸­å¿˜è®°æ¸…ç†èµ„æº</h3>
            <pre v-pre>// âŒ é”™è¯¯ç¤ºä¾‹ï¼šä¼šå¯¼è‡´å†…å­˜æ³„æ¼
new Vue({
  mounted() {
    // æ·»åŠ äº‹ä»¶ç›‘å¬
    window.addEventListener('resize', this.handleResize);
    // åˆ›å»ºå®šæ—¶å™¨
    this.timer = setInterval(() => {
      // æ¯ç§’æ‰§è¡Œ
    }, 1000);
  }
  // âŒ æ²¡æœ‰åœ¨ beforeDestroy ä¸­æ¸…ç†ï¼
});</pre>

            <div class="error-note">
                <div class="note-title">å¦‚ä½•ä¿®å¤ï¼Ÿ</div>
                <pre v-pre>// âœ… æ­£ç¡®åšæ³•ï¼šåœ¨ beforeDestroy ä¸­æ¸…ç†
beforeDestroy() {
  // ç§»é™¤äº‹ä»¶ç›‘å¬
  window.removeEventListener('resize', this.handleResize);
  // æ¸…ç†å®šæ—¶å™¨
  clearInterval(this.timer);
}</pre>
            </div>

            <hr style="margin: 20px 0;" />

            <h3>âŒ é™·é˜± 3ï¼šåœ¨ created ä¸­å°è¯•è®¿é—® DOM</h3>
            <pre v-pre>// âŒ é”™è¯¯ç¤ºä¾‹ï¼šDOM è¿˜æœªæŒ‚è½½
new Vue({
  created() {
    // âŒ $el æ˜¯ undefined
    const el = this.$el;
    // âŒ æ— æ³•è®¿é—® ref
    this.$refs.input.focus();
  }
});</pre>

            <div class="error-note">
                <div class="note-title">å¦‚ä½•ä¿®å¤ï¼Ÿ</div>
                <pre v-pre>// âœ… æ­£ç¡®åšæ³•ï¼šä½¿ç”¨ mounted æˆ– $nextTick
mounted() {
  // âœ… $el å·²å¯ç”¨
  const el = this.$el;
  // âœ… å¯ä»¥è®¿é—® ref
  this.$refs.input.focus();
}

// æˆ–åœ¨ created ä¸­ä½¿ç”¨ $nextTick
created() {
  this.$nextTick(() => {
    // è¿™é‡Œ DOM å·²å‡†å¤‡å¥½
    this.$refs.input.focus();
  });
}</pre>
            </div>

            <hr style="margin: 20px 0;" />

            <h3>âŒ é™·é˜± 4ï¼šåœ¨ mounted ä¸­è¿›è¡Œå¤§é‡åŒæ­¥æ“ä½œ</h3>
            <pre v-pre>// âŒ ä¸æ¨èï¼šä¼šé˜»å¡ä¸»çº¿ç¨‹
new Vue({
  mounted() {
    // âŒ è¿™ä¼šå†»ç»“é¡µé¢
    for (let i = 0; i < 1000000; i++) {
      this.processData();
    }
  }
});</pre>

            <div class="error-note">
                <div class="note-title">å¦‚ä½•ä¿®å¤ï¼Ÿ</div>
                <pre v-pre">// âœ… ä½¿ç”¨å¼‚æ­¥æ–¹å¼
mounted() {
  // æ–¹æ¡ˆ1ï¼šä½¿ç”¨ setTimeout åˆ†å—å¤„ç†
  setTimeout(() => {
    this.processLargeData();
  }, 0);
  
  // æ–¹æ¡ˆ2ï¼šä½¿ç”¨ Worker
  const worker = new Worker('worker.js');
  worker.postMessage(this.data);
}</pre>
            </div>
        </div>

        <hr />

        <!-- ========== 9. å¿«é€Ÿå‚è€ƒ ========== -->
        <h2>ğŸ“š 9. ç”Ÿå‘½å‘¨æœŸé€ŸæŸ¥è¡¨</h2>
        <div class="example-box">
            <div class="example-title">å¿«é€ŸæŸ¥æ‰¾ä½ éœ€è¦çš„é’©å­</div>

            <h3>æˆ‘æƒ³åšä»€ä¹ˆï¼Ÿâ†’ åº”è¯¥ç”¨å“ªä¸ªé’©å­ï¼Ÿ</h3>
            <table>
                <tr>
                    <th>ç›®æ ‡</th>
                    <th>ä½¿ç”¨é’©å­</th>
                    <th>ä»£ç ç¤ºä¾‹</th>
                </tr>
                <tr>
                    <td><strong>é¡µé¢åŠ è½½æ—¶è·å–æ•°æ®</strong></td>
                    <td>created</td>
                    <td><code>this.fetchData()</code></td>
                </tr>
                <tr>
                    <td><strong>è¾“å…¥æ¡†è‡ªåŠ¨èšç„¦</strong></td>
                    <td>mounted</td>
                    <td><code>this.$refs.input.focus()</code></td>
                </tr>
                <tr>
                    <td><strong>é¡µé¢å¤§å°æ”¹å˜é‡æ–°è®¡ç®—</strong></td>
                    <td>mounted + beforeDestroy</td>
                    <td><code>window.addEventListener/removeEventListener</code></td>
                </tr>
                <tr>
                    <td><strong>åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“</strong></td>
                    <td>mounted</td>
                    <td><code>this.chart = new Chart()</code></td>
                </tr>
                <tr>
                    <td><strong>ç›‘å¬æ•°æ®å˜åŒ–</strong></td>
                    <td>watchï¼ˆä¸æ˜¯é’©å­ï¼‰</td>
                    <td><code>watch: { data() {} }</code></td>
                </tr>
                <tr>
                    <td><strong>æ¸…ç†å®šæ—¶å™¨</strong></td>
                    <td>beforeDestroy</td>
                    <td><code>clearInterval(this.timer)</code></td>
                </tr>
                <tr>
                    <td><strong>ä¿å­˜æ•°æ®åˆ°æœ¬åœ°</strong></td>
                    <td>beforeDestroy</td>
                    <td><code>localStorage.setItem(...)</code></td>
                </tr>
                <tr>
                    <td><strong>æ£€æŸ¥æ•°æ®æ˜¯å¦æœ‰æ•ˆ</strong></td>
                    <td>beforeUpdate</td>
                    <td>æ—¥å¿—è®°å½•ã€çŠ¶æ€æ£€æŸ¥</td>
                </tr>
            </table>
        </div>

        <hr />

        <!-- ========== 10. æ€»ç»“ ========== -->
        <div class="note success-note">
            <div class="note-title">ğŸ“š å…³é”®è¦ç‚¹æ€»ç»“</div>
            
            <h3>3 ä¸ªé˜¶æ®µ 8 ä¸ªé’©å­</h3>
            <table style="width: 100%; margin-top: 10px; border-collapse: collapse;">
                <tr style="background: #667eea; color: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;"><strong>åˆå§‹åŒ–</strong></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">beforeCreate â†’ created â†’ beforeMount â†’ mounted</td>
                </tr>
                <tr style="background: #f5576c; color: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;"><strong>æ›´æ–°</strong></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">beforeUpdate â†’ updated</td>
                </tr>
                <tr style="background: #fa709a; color: white;">
                    <td style="padding: 8px; border: 1px solid #ddd;"><strong>é”€æ¯</strong></td>
                    <td style="padding: 8px; border: 1px solid #ddd;">beforeDestroy â†’ destroyed</td>
                </tr>
            </table>

            <h3 style="margin-top: 20px;">ä¸¤ä¸ªæœ€å¸¸ç”¨çš„é’©å­</h3>
            <ul style="margin-left: 20px; margin-top: 8px;">
                <li><strong>created</strong> â­â­â­â­â­
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li>âœ… æ•°æ®åˆå§‹åŒ–</li>
                        <li>âœ… å‘é€ Ajax è¯·æ±‚</li>
                        <li>âœ… æ·»åŠ å…¨å±€äº‹ä»¶ç›‘å¬</li>
                    </ul>
                </li>
                <li style="margin-top: 10px;"><strong>mounted</strong> â­â­â­â­â­
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li>âœ… DOM æ“ä½œ</li>
                        <li>âœ… åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“</li>
                        <li>âœ… æ·»åŠ  DOM äº‹ä»¶ç›‘å¬</li>
                    </ul>
                </li>
            </ul>

            <h3 style="margin-top: 20px;">å…³é”®è§„åˆ™</h3>
            <ul style="margin-left: 20px; margin-top: 8px;">
                <li>âœ… createdï¼šå¯ä»¥è®¿é—®æ•°æ®ä½†ä¸èƒ½è®¿é—® DOM</li>
                <li>âœ… mountedï¼šå¯ä»¥è®¿é—® DOM</li>
                <li>âœ… beforeDestroyï¼šä¸€å®šè¦æ¸…ç†èµ„æº</li>
                <li>âŒ ä¸è¦åœ¨ updated ä¸­ä¿®æ”¹æ•°æ®â†’æ­»å¾ªç¯</li>
                <li>âŒ ä¸è¦å¿˜è®°æ¸…ç†äº‹ä»¶ç›‘å¬â†’å†…å­˜æ³„æ¼</li>
            </ul>
        </div>

    </div>

    <script type="text/javascript">
        Vue.config.productionTip = false;

        const vm = new Vue({
            el: '#root',
            data: {
                // æ›´æ–°é˜¶æ®µæ¼”ç¤º
                updateCounter: 0,
                updateLog: [],
                // æ—¥å¿—é”ï¼Œé˜²æ­¢åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­ä¿®æ”¹å“åº”å¼æ•°æ®å¯¼è‡´æ­»å¾ªç¯
                _logLock: false,

                // é”€æ¯é˜¶æ®µæ¼”ç¤º
                showDestroyText: false,
                destroyShowText: '(æš‚æ— æ¼”ç¤ºå®ä¾‹)',
                destroyDemoVm: null
            },

            methods: {
                // åˆ›å»ºåˆå§‹åŒ–æ¼”ç¤º
                createInitDemo() {
                    console.clear();
                    console.log('%c========== åˆå§‹åŒ–é˜¶æ®µæ¼”ç¤º ==========', 'color: #667eea; font-size: 16px; font-weight: bold;');
                    
                    const initVm = new Vue({
                        el: '#demo-init',
                        data() {
                            return { message: 'ä½ å¥½ Vue' }
                        },
                        beforeCreate() {
                            console.log('%c1ï¸âƒ£ beforeCreate', 'color: #f5576c; font-weight: bold;');
                            console.log('   èƒ½è®¿é—® data?', this.$data ? 'âŒ ä¸èƒ½' : 'âŒ ä¸èƒ½');
                            console.log('   èƒ½è®¿é—® methods?', this.$options.methods ? 'âŒ ä¸èƒ½' : 'âŒ ä¸èƒ½');
                            console.log('   $el:', this.$el);
                        },
                        created() {
                            console.log('%c2ï¸âƒ£ created', 'color: #f5576c; font-weight: bold;');
                            console.log('   data å·²åˆå§‹åŒ–:', this.message);
                            console.log('   èƒ½è®¿é—® methods?', typeof this.sayHello === 'function' ? 'âœ… èƒ½' : 'âŒ ä¸èƒ½');
                            console.log('   $el:', this.$el);
                        },
                        beforeMount() {
                            console.log('%c3ï¸âƒ£ beforeMount', 'color: #f5576c; font-weight: bold;');
                            console.log('   HTML:', this.$el ? this.$el.innerHTML : 'undefined');
                            console.log('   DOM å·²æŒ‚è½½?', this.$el ? 'âŒ è¿˜æ²¡' : 'âŒ è¿˜æ²¡');
                        },
                        mounted() {
                            console.log('%c4ï¸âƒ£ mounted', 'color: #28a745; font-weight: bold;');
                            console.log('   âœ… å®ä¾‹å·²æŒ‚è½½');
                            console.log('   HTML:', this.$el.innerHTML);
                            console.log('   å¯ä»¥è¿›è¡Œ DOM æ“ä½œ');
                            console.log('%c========== åˆå§‹åŒ–å®Œæˆ ==========', 'color: #667eea; font-size: 16px; font-weight: bold;');
                        },
                        methods: {
                            sayHello() {
                                return 'Hello';
                            }
                        }
                    });

                    // 3ç§’åé”€æ¯
                    setTimeout(() => {
                        initVm.$destroy();
                    }, 3000);
                },

                // å®‰å…¨çš„æ—¥å¿—å‡½æ•°ï¼šå¸¦é”ï¼Œé¿å…åœ¨é’©å­ä¸­ç›´æ¥è§¦å‘å“åº”å¼æ›´æ–°çš„å¾ªç¯
                safeLog(hook, message) {
                    if (this._logLock) return;
                    this._logLock = true;
                    const timestamp = new Date().toLocaleTimeString();
                    this.updateLog.unshift({ time: timestamp, hook, message });
                    if (this.updateLog.length > 20) {
                        this.updateLog.pop();
                    }
                    // åœ¨ä¸‹ä¸€æ¬¡ DOM æ›´æ–°å‘¨æœŸä¹‹åé‡Šæ”¾é”
                    this.$nextTick(() => {
                        this._logLock = false;
                    });
                },

                // æ›´æ–°é˜¶æ®µæ¼”ç¤ºçš„ beforeUpdateï¼ˆä»…è®°å½•åˆ°æ§åˆ¶å°ï¼Œé¿å…ä¿®æ”¹å“åº”å¼æ•°æ®ï¼‰
                onBeforeUpdate() {
                    const timestamp = new Date().toLocaleTimeString();
                    console.log(`${timestamp} beforeUpdate: æ•°æ®å˜ä¸º ${this.updateCounter}ï¼ŒDOM è¿˜æœªæ›´æ–°`);
                },

                // æ›´æ–°é˜¶æ®µæ¼”ç¤ºçš„ updatedï¼ˆé€šè¿‡ safeLog å®‰å…¨è®°å½•åˆ°è§†å›¾ï¼‰
                onUpdated() {
                    this.safeLog('updated', `DOM å·²æ›´æ–°ï¼Œç°åœ¨æ˜¾ç¤º ${this.updateCounter}`);
                },

                // æ¸…ç©ºæ—¥å¿—
                clearUpdateLog() {
                    this.updateLog = [];
                },

                // åˆ›å»ºé”€æ¯æ¼”ç¤º
                createDestroyDemo() {
                    console.clear();
                    console.log('%c========== é”€æ¯é˜¶æ®µæ¼”ç¤º ==========', 'color: #667eea; font-size: 16px; font-weight: bold;');
                    
                    this.showDestroyText = true;
                    this.destroyShowText = 'æ¼”ç¤ºå®ä¾‹å·²åˆ›å»ºï¼Œç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®é”€æ¯å®ƒ';
                    // åˆ›å»ºä¸€ä¸ªä¸´æ—¶å®¹å™¨å¹¶æŒ‚è½½åˆ°é¡µé¢ï¼Œç¡®ä¿ mounted/beforeDestroy èƒ½è¢«è§¦å‘
                    const container = document.createElement('div');
                    container.id = 'destroy-demo-container';
                    container.style.padding = '10px';
                    container.style.margin = '10px 0';
                    container.style.border = '1px dashed #ddd';
                    container.textContent = 'é”€æ¯æ¼”ç¤ºå®¹å™¨ï¼ˆå°†è¢«é”€æ¯ï¼‰';
                    document.body.appendChild(container);

                    this.destroyDemoVm = new Vue({
                        el: container,
                        data() {
                            return { message: 'æˆ‘æ˜¯å³å°†è¢«é”€æ¯çš„å®ä¾‹', timer: null }
                        },
                        beforeCreate() {
                            console.log('%c1ï¸âƒ£ beforeCreate', 'color: #fa709a; font-weight: bold;');
                        },
                        created() {
                            console.log('%c2ï¸âƒ£ created', 'color: #fa709a; font-weight: bold;');
                            console.log('   å®ä¾‹å·²åˆ›å»ºï¼Œæ•°æ®å·²åˆå§‹åŒ–');
                        },
                        beforeMount() {
                            console.log('%c3ï¸âƒ£ beforeMount', 'color: #fa709a; font-weight: bold;');
                        },
                        mounted() {
                            console.log('%c4ï¸âƒ£ mounted', 'color: #fa709a; font-weight: bold;');
                            // æ¨¡æ‹Ÿæ·»åŠ äº‹ä»¶ç›‘å¬å’Œå®šæ—¶å™¨ï¼ˆæ³¨æ„ï¼šçŸ­é¢‘ç‡ä»¥ä¾¿æ¼”ç¤ºï¼Œä¸ä¼šæ— é™åˆ·å±ï¼‰
                            this.timer = setInterval(() => {
                                console.log('â° (æ¼”ç¤ºå®šæ—¶å™¨è¿è¡Œä¸­)');
                            }, 2000);
                        },
                        beforeDestroy() {
                            console.log('%c5ï¸âƒ£ beforeDestroy - æ¸…ç†èµ„æºå¼€å§‹', 'color: #fa709a; font-weight: bold;');
                            console.log('   âœ… æ¸…ç†å®šæ—¶å™¨');
                            if (this.timer) {
                                clearInterval(this.timer);
                                this.timer = null;
                            }
                            console.log('   âœ… ç§»é™¤å®¹å™¨èŠ‚ç‚¹');
                            // åœ¨é”€æ¯å‰ç§»é™¤æŒ‚è½½çš„ DOM å®¹å™¨ï¼Œé¿å…æ®‹ç•™
                            if (this.$el && this.$el.parentNode) {
                                this.$el.parentNode.removeChild(this.$el);
                            }
                        },
                        destroyed() {
                            console.log('%c6ï¸âƒ£ destroyed - å®ä¾‹å·²é”€æ¯', 'color: #fa709a; font-weight: bold;');
                            console.log('   å®ä¾‹ä¸ DOM çš„è¿æ¥å·²æ–­å¼€');
                            console.log('%c========== é”€æ¯å®Œæˆ ==========', 'color: #667eea; font-size: 16px; font-weight: bold;');
                        }
                    });
                },

                // é”€æ¯æ¼”ç¤ºå®ä¾‹
                destroyDemo() {
                    if (this.destroyDemoVm) {
                        try {
                            this.destroyDemoVm.$destroy();
                        } catch (e) {
                            console.warn('é”€æ¯å®ä¾‹æ—¶å‘ç”Ÿé”™è¯¯ï¼š', e);
                        }
                        this.destroyDemoVm = null;
                        this.showDestroyText = false;
                        this.destroyShowText = '(æ¼”ç¤ºå®ä¾‹å·²é”€æ¯)';
                    }
                }
            },

            beforeUpdate() {
                this.onBeforeUpdate();
            },

            updated() {
                this.onUpdated();
            }
        });
    </script>
</body>

</html>
