<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue è‡ªå®šä¹‰æŒ‡ä»¤å­¦ä¹ æ¡ˆä¾‹</title>

    <script type="text/javascript" src="../js/vue.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        #root {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            text-align: center;
            color: #999;
            margin-bottom: 30px;
            font-size: 14px;
        }

        h2 {
            color: #667eea;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 20px;
            border-left: 4px solid #667eea;
            padding-left: 10px;
        }

        .example-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .example-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .result {
            background: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            border: 1px solid #e0e0e0;
        }

        .result>div {
            margin: 8px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .label {
            color: #666;
            font-weight: 500;
            display: block;
            margin-bottom: 5px;
        }

        .value {
            color: #333;
            font-weight: bold;
            display: block;
        }

        .highlight {
            color: #667eea;
        }

        code {
            background: #ffe6e6;
            padding: 2px 6px;
            border-radius: 3px;
            color: #e74c3c;
            font-size: 13px;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 13px;
            line-height: 1.5;
            margin: 10px 0;
        }

        .note {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }

        .note-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 5px;
        }

        .success-note {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .success-note .note-title {
            color: #155724;
        }

        hr {
            margin: 30px 0;
            border: none;
            border-top: 2px solid #f0f0f0;
        }

        .demo-box {
            border: 2px dashed #ddd;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            background: white;
        }

        button {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #666;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        input[type="text"],
        input[type="number"],
        textarea {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 100%;
            font-size: 14px;
            transition: all 0.3s;
            margin: 5px 0;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .drag-box {
            width: 200px;
            height: 100px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: move;
            user-select: none;
            position: relative;
        }

        .copy-demo {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #2196f3;
            margin: 10px 0;
            display: inline-block;
        }

        .permission-box {
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .admin-only {
            background: #e8f5e9;
            border: 2px solid #4caf50;
        }

        .user-only {
            background: #fff3e0;
            border: 2px solid #ff9800;
        }

        .guest-only {
            background: #fce4ec;
            border: 2px solid #e91e63;
        }

        .hidden {
            display: none;
        }

        .image-container {
            display: inline-block;
            margin: 10px;
            position: relative;
        }

        .image-container img {
            width: 200px;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
        }

        .loading-placeholder {
            width: 200px;
            height: 150px;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            color: #999;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        table th {
            padding: 8px;
            border: 1px solid #ddd;
            text-align: left;
            background: #f5f5f5;
        }

        table td {
            padding: 8px;
            border: 1px solid #ddd;
        }
    </style>
</head>

<body>
    <!--
      ==================== Vue è‡ªå®šä¹‰æŒ‡ä»¤å®Œæ•´æ•™ç¨‹ ====================
      
      ä¸€ã€ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰æŒ‡ä»¤ï¼Ÿ
        é™¤äº† Vue å†…ç½®çš„æŒ‡ä»¤ï¼ˆv-modelã€v-show ç­‰ï¼‰ï¼ŒVue å…è®¸æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚
        è‡ªå®šä¹‰æŒ‡ä»¤ä¸»è¦ç”¨äºå¯¹æ™®é€š DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œã€‚
        
      äºŒã€æŒ‡ä»¤çš„æ³¨å†Œæ–¹å¼ï¼š
        1. å…¨å±€æŒ‡ä»¤ï¼šVue.directive('æŒ‡ä»¤å', { é’©å­å‡½æ•° })
        2. å±€éƒ¨æŒ‡ä»¤ï¼šåœ¨ Vue å®ä¾‹çš„ directives é€‰é¡¹ä¸­å®šä¹‰
        
      ä¸‰ã€æŒ‡ä»¤çš„é’©å­å‡½æ•°ï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰ï¼š
        1. bind - åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨
        2. inserted - è¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨
        3. update - æ‰€åœ¨ç»„ä»¶çš„ VNode æ›´æ–°æ—¶è°ƒç”¨
        4. componentUpdated - ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨
        5. unbind - åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨
        
      å››ã€é’©å­å‡½æ•°çš„å‚æ•°ï¼š
        - elï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç›´æ¥æ“ä½œ DOM
        - bindingï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š
          * nameï¼šæŒ‡ä»¤åï¼ˆä¸åŒ…æ‹¬ v- å‰ç¼€ï¼‰
          * valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼ˆå¦‚ v-mydir="1+1" ä¸­ï¼Œå€¼ä¸º 2ï¼‰
          * oldValueï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼ˆä»…åœ¨ update å’Œ componentUpdated ä¸­å¯ç”¨ï¼‰
          * expressionï¼šæŒ‡ä»¤çš„è¡¨è¾¾å¼ï¼ˆå¦‚ v-mydir="1+1" ä¸­ï¼Œè¡¨è¾¾å¼ä¸º "1+1"ï¼‰
          * argï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼ˆå¦‚ v-mydir:foo ä¸­ï¼Œå‚æ•°ä¸º "foo"ï¼‰
          * modifiersï¼šä¿®é¥°ç¬¦å¯¹è±¡ï¼ˆå¦‚ v-mydir.foo.bar ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º {foo:true, bar:true}ï¼‰
        - vnodeï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹
        - oldVnodeï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼ˆä»…åœ¨ update å’Œ componentUpdated ä¸­å¯ç”¨ï¼‰
        
      äº”ã€å¸¸è§å®æˆ˜æ¡ˆä¾‹ï¼š
        1. v-focus - é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨èšç„¦
        2. v-color - åŠ¨æ€ä¿®æ”¹æ–‡å­—é¢œè‰²
        3. v-copy - ä¸€é”®å¤åˆ¶æ–‡æœ¬
        4. v-drag - å…ƒç´ æ‹–æ‹½
        5. v-permission - æƒé™æ§åˆ¶æ˜¾ç¤º/éšè—
        6. v-debounce - é˜²æŠ–å¤„ç†
        7. v-longpress - é•¿æŒ‰è§¦å‘äº‹ä»¶
        8. v-emoji - é™åˆ¶è¾“å…¥è¡¨æƒ…ç¬¦å·
        
      å…­ã€æ³¨æ„äº‹é¡¹ï¼š
        1. æŒ‡ä»¤åä¸è¦å’Œå†…ç½®æŒ‡ä»¤å†²çª
        2. æŒ‡ä»¤ä¸­å°½é‡é¿å…æ“ä½œæ•°æ®ï¼Œä¸»è¦ç”¨äº DOM æ“ä½œ
        3. å¦‚æœåªéœ€è¦ bind å’Œ updateï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°ç®€å†™
        4. æŒ‡ä»¤çš„å‚æ•°å’Œä¿®é¥°ç¬¦å¯ä»¥åŠ¨æ€ç»‘å®š
  -->
    <div id="root">
        <h1>ğŸ¯ Vue è‡ªå®šä¹‰æŒ‡ä»¤å®Œæ•´å­¦ä¹ æ¡ˆä¾‹</h1>
        <p class="subtitle">Custom Directives - æŒæ¡åº•å±‚ DOM æ“æ§èƒ½åŠ›</p>

        <!-- ========== 1. v-focus è‡ªåŠ¨èšç„¦ ========== -->
        <h2>ğŸ¯ 1. v-focus - è‡ªåŠ¨èšç„¦æŒ‡ä»¤</h2>
        <div class="example-box">
            <div class="example-title">é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨èšç„¦åˆ°è¾“å…¥æ¡†</div>
            <pre v-pre>// å…¨å±€æŒ‡ä»¤å®šä¹‰
                    Vue.directive('focus', {
                    inserted(el) {
                        el.focus();
                    }
                    });

                    // ä½¿ç”¨
                    &lt;input v-focus /&gt;
                </pre>

            <div class="result">
                <div>
                    <span class="label">æ™®é€šè¾“å…¥æ¡†ï¼š</span>
                    <input type="text" placeholder="æ™®é€šè¾“å…¥æ¡†" />
                </div>
                <div>
                    <span class="label">ä½¿ç”¨ v-focus çš„è¾“å…¥æ¡†ï¼ˆé¡µé¢åŠ è½½æ—¶è‡ªåŠ¨èšç„¦ï¼‰ï¼š</span>
                    <input type="text" v-focus placeholder="è¿™ä¸ªè¾“å…¥æ¡†ä¼šè‡ªåŠ¨è·å¾—ç„¦ç‚¹" />
                </div>
            </div>
        </div>

        <hr />

        <!-- ========== 2. v-color åŠ¨æ€é¢œè‰² ========== -->
        <h2>ğŸ¨ 2. v-color - åŠ¨æ€é¢œè‰²æŒ‡ä»¤</h2>
        <div class="example-box">
            <div class="example-title">æ ¹æ®ç»‘å®šå€¼åŠ¨æ€ä¿®æ”¹æ–‡å­—é¢œè‰²</div>
            <pre v-pre>// å…¨å±€æŒ‡ä»¤å®šä¹‰
                Vue.directive('color', {
                bind(el, binding) {
                    el.style.color = binding.value;
                },
                update(el, binding) {
                    el.style.color = binding.value;
                }
                });

                // ä½¿ç”¨
                &lt;div v-color="colorValue"&gt;æ–‡æœ¬&lt;/div&gt;
            </pre>

            <div class="result">
                <div>
                    <span class="label">é€‰æ‹©é¢œè‰²ï¼š</span>
                    <button class="btn-secondary" @click="textColor = 'red'">çº¢è‰²</button>
                    <button class="btn-secondary" @click="textColor = 'blue'">è“è‰²</button>
                    <button class="btn-secondary" @click="textColor = 'green'">ç»¿è‰²</button>
                    <button class="btn-secondary" @click="textColor = '#ff6b6b'">ç²‰è‰²</button>
                    <button class="btn-secondary" @click="textColor = '#667eea'">ç´«è‰²</button>
                </div>
                <div>
                    <span class="label">æ•ˆæœå±•ç¤ºï¼š</span>
                    <div class="demo-box">
                        <h3 v-color="textColor" style="font-size: 24px;">è¿™æ®µæ–‡å­—çš„é¢œè‰²ä¼šåŠ¨æ€æ”¹å˜</h3>
                        <p v-color="textColor">å½“å‰é¢œè‰²å€¼ï¼š{{ textColor }}</p>
                    </div>
                </div>
            </div>
        </div>

        <hr />

        <!-- ========== 3. v-copy ä¸€é”®å¤åˆ¶ ========== -->
        <h2>ğŸ“‹ 3. v-copy - ä¸€é”®å¤åˆ¶æŒ‡ä»¤</h2>
        <div class="example-box">
            <div class="example-title">ç‚¹å‡»å…ƒç´ æ—¶å¤åˆ¶æŒ‡å®šæ–‡æœ¬åˆ°å‰ªè´´æ¿</div>
            <pre v-pre>// å…¨å±€æŒ‡ä»¤å®šä¹‰
                Vue.directive('copy', {
                bind(el, binding) {
                    el.addEventListener('click', () => {
                    const textarea = document.createElement('textarea');
                    textarea.value = binding.value;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    alert('å¤åˆ¶æˆåŠŸï¼š' + binding.value);
                    });
                }
                });

                // ä½¿ç”¨
                &lt;button v-copy="copyText"&gt;ç‚¹å‡»å¤åˆ¶&lt;/button&gt;
            </pre>

            <div class="result">
                <div>
                    <span class="label">è¾“å…¥è¦å¤åˆ¶çš„å†…å®¹ï¼š</span>
                    <input type="text" v-model="copyText" placeholder="è¾“å…¥å†…å®¹" />
                </div>
                <div>
                    <span class="label">ç‚¹å‡»ä¸‹æ–¹æ–‡æœ¬å¤åˆ¶ï¼š</span>
                    <div class="copy-demo" v-copy="copyText" style="cursor: pointer;">
                        ç‚¹å‡»å¤åˆ¶ï¼š{{ copyText }}
                    </div>
                    <button class="btn-primary" v-copy="copyText">ğŸ“‹ å¤åˆ¶åˆ°å‰ªè´´æ¿</button>
                </div>
            </div>
        </div>

        <hr />

        <!-- ========== 4. v-drag æ‹–æ‹½æŒ‡ä»¤ ========== -->
        <h2>ğŸ–±ï¸ 4. v-drag - å…ƒç´ æ‹–æ‹½æŒ‡ä»¤</h2>
        <div class="example-box">
            <div class="example-title">è®©å…ƒç´ å¯ä»¥è‡ªç”±æ‹–æ‹½</div>
            <pre v-pre>// å…¨å±€æŒ‡ä»¤å®šä¹‰
                Vue.directive('drag', {
                bind(el) {
                    el.style.position = 'absolute';
                    el.onmousedown = function(e) {
                    let disX = e.clientX - el.offsetLeft;
                    let disY = e.clientY - el.offsetTop;
                    
                    document.onmousemove = function(e) {
                        el.style.left = e.clientX - disX + 'px';
                        el.style.top = e.clientY - disY + 'px';
                    };
                    
                    document.onmouseup = function() {
                        document.onmousemove = null;
                        document.onmouseup = null;
                    };
                    };
                }
                });

                // ä½¿ç”¨
                &lt;div v-drag&gt;æ‹–æ‹½æˆ‘&lt;/div&gt;
            </pre>

            <div class="result">
                <div>
                    <span class="label">è¯•è¯•æ‹–æ‹½ä¸‹é¢çš„æ–¹å—ï¼š</span>
                    <div
                        style="position: relative; height: 300px; border: 2px dashed #ddd; border-radius: 8px; margin-top: 10px;">
                        <div v-drag class="drag-box">
                            ğŸ–±ï¸ æ‹–æ‹½æˆ‘
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <hr />

        <!-- ========== 5. v-permission æƒé™æ§åˆ¶ ========== -->
        <h2>ğŸ” 5. v-permission - æƒé™æ§åˆ¶æŒ‡ä»¤</h2>
        <div class="example-box">
            <div class="example-title">æ ¹æ®ç”¨æˆ·æƒé™æ˜¾ç¤º/éšè—å…ƒç´ </div>
            <pre v-pre>// å…¨å±€æŒ‡ä»¤å®šä¹‰
                Vue.directive('permission', {
                inserted(el, binding) {
                    const userRole = binding.value;
                    const currentRole = 'admin'; // æ¨¡æ‹Ÿå½“å‰ç”¨æˆ·è§’è‰²
                    
                    if (userRole !== currentRole) {
                    el.parentNode && el.parentNode.removeChild(el);
                    }
                }
                });

                // ä½¿ç”¨
                &lt;div v-permission="'admin'"&gt;ç®¡ç†å‘˜å¯è§&lt;/div&gt;
            </pre>

            <div class="result">
                <div>
                    <span class="label">åˆ‡æ¢ç”¨æˆ·è§’è‰²ï¼š</span>
                    <button class="btn-secondary" @click="currentRole = 'admin'">ç®¡ç†å‘˜</button>
                    <button class="btn-secondary" @click="currentRole = 'user'">æ™®é€šç”¨æˆ·</button>
                    <button class="btn-secondary" @click="currentRole = 'guest'">è®¿å®¢</button>
                    <p style="margin-top: 10px;">å½“å‰è§’è‰²ï¼š<strong :style="{color: '#667eea'}">{{ currentRole }}</strong></p>
                </div>
                <div>
                    <span class="label">æƒé™æ§åˆ¶æ•ˆæœï¼š</span>
                    <div class="permission-box admin-only" v-permission="'admin'">
                        ğŸ”‘ ä»…ç®¡ç†å‘˜å¯è§çš„å†…å®¹
                    </div>
                    <div class="permission-box user-only" v-permission="'user'">
                        ğŸ‘¤ ä»…æ™®é€šç”¨æˆ·å¯è§çš„å†…å®¹
                    </div>
                    <div class="permission-box guest-only" v-permission="'guest'">
                        ğŸ‘ï¸ ä»…è®¿å®¢å¯è§çš„å†…å®¹
                    </div>
                </div>
            </div>
        </div>

        <hr />

        <!-- ========== 6. v-debounce é˜²æŠ–æŒ‡ä»¤ ========== -->
        <h2>â±ï¸ 6. v-debounce - é˜²æŠ–æŒ‡ä»¤</h2>
        <div class="example-box">
            <div class="example-title">è¾“å…¥æ¡†é˜²æŠ–ï¼Œå‡å°‘è§¦å‘æ¬¡æ•°</div>
            <pre v-pre>// å…¨å±€æŒ‡ä»¤å®šä¹‰
                Vue.directive('debounce', {
                inserted(el, binding) {
                    let timer;
                    el.addEventListener('input', () => {
                    clearTimeout(timer);
                    timer = setTimeout(() => {
                        binding.value();
                    }, 500);
                    });
                }
                });

                // ä½¿ç”¨
                &lt;input v-debounce="handleInput" /&gt;
            </pre>

            <div class="result">
                <div>
                    <span class="label">æ™®é€šè¾“å…¥ï¼ˆæ¯æ¬¡è¾“å…¥éƒ½è§¦å‘ï¼‰ï¼š</span>
                    <input type="text" @input="normalInputCount++" placeholder="è¾“å…¥è¯•è¯•" />
                    <p>è§¦å‘æ¬¡æ•°ï¼š<strong style="color: #e74c3c;">{{ normalInputCount }}</strong></p>
                </div>
                <div>
                    <span class="label">é˜²æŠ–è¾“å…¥ï¼ˆåœæ­¢è¾“å…¥500msåè§¦å‘ï¼‰ï¼š</span>
                    <input type="text" v-debounce="handleDebounceInput" placeholder="è¾“å…¥è¯•è¯•" />
                    <p>è§¦å‘æ¬¡æ•°ï¼š<strong style="color: #28a745;">{{ debounceInputCount }}</strong></p>
                </div>
                <div>
                    <p style="color: #666; font-size: 13px;">ğŸ’¡ æç¤ºï¼šå¿«é€Ÿè¾“å…¥å¤šä¸ªå­—ç¬¦ï¼Œå¯¹æ¯”ä¸¤è€…çš„è§¦å‘æ¬¡æ•°</p>
                </div>
            </div>
        </div>

        <hr />

        <!-- ========== 7. v-longpress é•¿æŒ‰æŒ‡ä»¤ ========== -->
        <h2>ğŸ‘† 7. v-longpress - é•¿æŒ‰è§¦å‘æŒ‡ä»¤</h2>
        <div class="example-box">
            <div class="example-title">é•¿æŒ‰å…ƒç´ è§¦å‘æŒ‡å®šäº‹ä»¶</div>
            <pre v-pre>// å…¨å±€æŒ‡ä»¤å®šä¹‰
                Vue.directive('longpress', {
                bind(el, binding) {
                    let timer;
                    el.addEventListener('mousedown', () => {
                    timer = setTimeout(() => {
                        binding.value();
                    }, 1000);
                    });
                    
                    el.addEventListener('mouseup', () => {
                    clearTimeout(timer);
                    });
                }
                });

                // ä½¿ç”¨
                &lt;button v-longpress="handleLongPress"&gt;é•¿æŒ‰æˆ‘&lt;/button&gt;
            </pre>

            <div class="result">
                <div>
                    <span class="label">é•¿æŒ‰æŒ‰é’®ï¼ˆæŒ‰ä½1ç§’è§¦å‘ï¼‰ï¼š</span>
                    <button class="btn-primary" v-longpress="handleLongPress">
                        ğŸ‘† é•¿æŒ‰æˆ‘ 1 ç§’
                    </button>
                    <p style="margin-top: 10px;">é•¿æŒ‰è§¦å‘æ¬¡æ•°ï¼š<strong style="color: #667eea;">{{ longPressCount }}</strong>
                    </p>
                </div>
            </div>
        </div>

        <hr />

        <!-- ========== 8. v-emoji é™åˆ¶è¡¨æƒ… ========== -->
        <h2>ğŸ˜€ 8. v-emoji - é™åˆ¶è¡¨æƒ…è¾“å…¥æŒ‡ä»¤</h2>
        <div class="example-box">
            <div class="example-title">ç¦æ­¢è¾“å…¥è¡¨æƒ…ç¬¦å·</div>
            <pre v-pre>// å…¨å±€æŒ‡ä»¤å®šä¹‰
                Vue.directive('emoji', {
                bind(el, binding) {
                    el.addEventListener('input', (e) => {
                    const reg = /[^\u0020-\u007E\u00A0-\u00BE\u2E80-\uA4CF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF\u0080-\u009F\u2000-\u201f\u2026\u2022\u20ac\r\n]/g;
                    if (reg.test(e.target.value)) {
                        e.target.value = e.target.value.replace(reg, '');
                        el.dispatchEvent(new Event('input'));
                    }
                    });
                }
                });

                // ä½¿ç”¨
                &lt;input v-emoji v-model="text" /&gt;
            </pre>

            <div class="result">
                <div>
                    <span class="label">æ™®é€šè¾“å…¥æ¡†ï¼ˆå¯è¾“å…¥è¡¨æƒ…ï¼‰ï¼š</span>
                    <input type="text" v-model="normalText" placeholder="è¯•è¯•è¾“å…¥è¡¨æƒ… ğŸ˜€" />
                    <p>è¾“å…¥å†…å®¹ï¼š{{ normalText }}</p>
                </div>
                <div>
                    <span class="label">é™åˆ¶è¡¨æƒ…è¾“å…¥æ¡†ï¼ˆè¡¨æƒ…ä¼šè¢«è¿‡æ»¤ï¼‰ï¼š</span>
                    <input type="text" v-emoji v-model="emojiText" placeholder="è¯•è¯•è¾“å…¥è¡¨æƒ… ğŸ˜€" />
                    <p>è¾“å…¥å†…å®¹ï¼š{{ emojiText }}</p>
                </div>
            </div>
        </div>

        <hr />

        <!-- ========== 9. æŒ‡ä»¤ç®€å†™å½¢å¼ vs å®Œæ•´å½¢å¼ ========== -->
        <h2>ğŸ“ 9. æŒ‡ä»¤ç®€å†™å½¢å¼ vs å®Œæ•´å½¢å¼</h2>
        <div class="example-box">
            <div class="example-title">ç†è§£ç®€å†™å½¢å¼å’Œå®Œæ•´å½¢å¼çš„åŒºåˆ«ä¸ä½¿ç”¨åœºæ™¯</div>
            
            <div class="note" style="margin-bottom: 15px;">
                <div class="note-title">ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</div>
                <p style="margin-top: 10px;"><strong>ç®€å†™å½¢å¼ï¼š</strong>å½“æŒ‡ä»¤åªéœ€è¦åœ¨ <code>bind</code> å’Œ <code>update</code> æ—¶æ‰§è¡Œç›¸åŒé€»è¾‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°ç®€å†™ã€‚</p>
                <p style="margin-top: 5px;"><strong>å®Œæ•´å½¢å¼ï¼š</strong>éœ€è¦åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸé’©å­ä¸­æ‰§è¡Œä¸åŒé€»è¾‘æ—¶ï¼Œå¿…é¡»ä½¿ç”¨å¯¹è±¡å½¢å¼ã€‚</p>
            </div>

            <pre v-pre>// ========== ç®€å†™å½¢å¼ï¼ˆå¸¸ç”¨ï¼‰ ==========
// é€‚ç”¨åœºæ™¯ï¼šbind å’Œ update æ‰§è¡Œç›¸åŒé€»è¾‘
Vue.directive('color-simple', function(el, binding) {
  el.style.color = binding.value;  // bind å’Œ update éƒ½æ‰§è¡Œè¿™æ®µä»£ç 
});

// ========== å®Œæ•´å½¢å¼ï¼ˆçµæ´»ï¼‰ ==========
// é€‚ç”¨åœºæ™¯ï¼šéœ€è¦åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸæ‰§è¡Œä¸åŒé€»è¾‘
Vue.directive('color-full', {
  bind(el, binding) {
    console.log('æŒ‡ä»¤é¦–æ¬¡ç»‘å®šæ—¶æ‰§è¡Œ');
    el.style.color = binding.value;
  },
  inserted(el) {
    console.log('å…ƒç´ æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹æ—¶æ‰§è¡Œ');
  },
  update(el, binding) {
    console.log('æ•°æ®æ›´æ–°æ—¶æ‰§è¡Œ');
    el.style.color = binding.value;
  },
  unbind(el) {
    console.log('æŒ‡ä»¤è§£ç»‘æ—¶æ‰§è¡Œ');
  }
});</pre>

            <div class="result">
                <div>
                    <span class="label">ç¤ºä¾‹1ï¼šç®€å†™å½¢å¼ - åŠ¨æ€èƒŒæ™¯è‰²</span>
                    <div class="demo-box">
                        <input type="color" v-model="bgColor" style="width: 60px; height: 40px;" />
                        <div v-bg-simple="bgColor" style="padding: 20px; margin-top: 10px; border-radius: 5px; text-align: center; color: white; font-weight: bold;">
                            ç®€å†™å½¢å¼ï¼šèƒŒæ™¯è‰²ä¼šè‡ªåŠ¨æ›´æ–°
                        </div>
                        <p style="margin-top: 5px; font-size: 13px; color: #666;">å½“å‰è‰²å€¼ï¼š{{ bgColor }}</p>
                    </div>
                </div>

                <div>
                    <span class="label">ç¤ºä¾‹2ï¼šå®Œæ•´å½¢å¼ - æ¸å…¥åŠ¨ç”»</span>
                    <div class="demo-box">
                        <button class="btn-primary" @click="showFadeBox = !showFadeBox">
                            {{ showFadeBox ? 'éšè—' : 'æ˜¾ç¤º' }} å…ƒç´ 
                        </button>
                        <div v-if="showFadeBox" v-fade-full style="padding: 20px; margin-top: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 5px; text-align: center; font-weight: bold;">
                            å®Œæ•´å½¢å¼ï¼šæˆ‘æœ‰æ¸å…¥æ•ˆæœï¼
                        </div>
                        <p style="margin-top: 5px; font-size: 13px; color: #666;">ğŸ’¡ åˆ‡æ¢æ˜¾ç¤º/éšè—è§‚å¯Ÿæ¸å…¥åŠ¨ç”»ï¼ˆä½¿ç”¨ inserted é’©å­å®ç°ï¼‰</p>
                    </div>
                </div>

                <div>
                    <span class="label">ç¤ºä¾‹3ï¼šå®Œæ•´å½¢å¼ - è¾“å…¥æ¡†è®¡æ•°å™¨</span>
                    <div class="demo-box">
                        <div style="position: relative; display: inline-block; width: 100%;">
                            <input v-counter-full type="text" v-model="counterText" placeholder="è¾“å…¥æ–‡å­—..." style="padding-right: 60px;" />
                        </div>
                        <p style="margin-top: 5px; font-size: 13px; color: #666;">ğŸ’¡ è¾“å…¥æ¡†å³ä¾§æ˜¾ç¤ºå­—ç¬¦è®¡æ•°ï¼ˆä½¿ç”¨ inserted å’Œ update é’©å­ï¼‰</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="example-box" style="background: #e8f5e9; border-left-color: #4caf50;">
            <div class="example-title">ğŸ”„ äº”ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­è¯¦è§£</div>
            <table style="width: 100%; margin-top: 10px;">
                <tr>
                    <th style="width: 20%;">é’©å­å‡½æ•°</th>
                    <th style="width: 40%;">è§¦å‘æ—¶æœº</th>
                    <th style="width: 40%;">ä½¿ç”¨åœºæ™¯</th>
                </tr>
                <tr>
                    <td><code>bind</code></td>
                    <td>æŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶</td>
                    <td>åˆå§‹åŒ–è®¾ç½®ã€æ·»åŠ äº‹ä»¶ç›‘å¬</td>
                </tr>
                <tr>
                    <td><code>inserted</code></td>
                    <td>å…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶</td>
                    <td>éœ€è¦çˆ¶èŠ‚ç‚¹çš„æ“ä½œï¼ˆå¦‚è·å–çˆ¶å…ƒç´ å®½åº¦ï¼‰</td>
                </tr>
                <tr>
                    <td><code>update</code></td>
                    <td>ç»„ä»¶ VNode æ›´æ–°æ—¶</td>
                    <td>å“åº”æ•°æ®å˜åŒ–ï¼ˆå¯èƒ½åœ¨å­èŠ‚ç‚¹æ›´æ–°å‰ï¼‰</td>
                </tr>
                <tr>
                    <td><code>componentUpdated</code></td>
                    <td>ç»„ä»¶åŠå­èŠ‚ç‚¹å…¨éƒ¨æ›´æ–°å</td>
                    <td>éœ€è¦ç­‰å¾…æ‰€æœ‰å­èŠ‚ç‚¹æ›´æ–°çš„æ“ä½œ</td>
                </tr>
                <tr>
                    <td><code>unbind</code></td>
                    <td>æŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶</td>
                    <td>æ¸…ç†å·¥ä½œï¼ˆç§»é™¤äº‹ä»¶ç›‘å¬ã€å®šæ—¶å™¨ï¼‰</td>
                </tr>
            </table>
        </div>

        <div class="note">
            <div class="note-title">ğŸ¯ å¦‚ä½•é€‰æ‹©ç®€å†™è¿˜æ˜¯å®Œæ•´å½¢å¼ï¼Ÿ</div>
            <table style="width: 100%; margin-top: 10px; border-collapse: collapse;">
                <tr style="background: #f5f5f5;">
                    <th style="padding: 8px; border: 1px solid #ddd;">ä½¿ç”¨åœºæ™¯</th>
                    <th style="padding: 8px; border: 1px solid #ddd;">æ¨èå½¢å¼</th>
                    <th style="padding: 8px; border: 1px solid #ddd;">ç¤ºä¾‹</th>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ddd;">åªéœ€è¦è®¾ç½®æ ·å¼</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âœ… ç®€å†™</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>v-color</code>ã€<code>v-bg</code></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ddd;">éœ€è¦åŠ¨ç”»æ•ˆæœ</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âœ… å®Œæ•´ï¼ˆä½¿ç”¨ insertedï¼‰</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>v-fade</code>ã€<code>v-slide</code></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ddd;">éœ€è¦æ·»åŠ äº‹ä»¶ç›‘å¬</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âœ… å®Œæ•´ï¼ˆbind + unbindï¼‰</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>v-click-outside</code></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ddd;">éœ€è¦çˆ¶å…ƒç´ ä¿¡æ¯</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âœ… å®Œæ•´ï¼ˆä½¿ç”¨ insertedï¼‰</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>v-tooltip</code></td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ddd;">éœ€è¦æ¸…ç†èµ„æº</td>
                    <td style="padding: 8px; border: 1px solid #ddd;">âœ… å®Œæ•´ï¼ˆä½¿ç”¨ unbindï¼‰</td>
                    <td style="padding: 8px; border: 1px solid #ddd;"><code>v-drag</code>ã€<code>v-resize</code></td>
                </tr>
            </table>
            <p style="margin-top: 10px; color: #856404;"><strong>ç»éªŒæ³•åˆ™ï¼š</strong>80% çš„æƒ…å†µç”¨ç®€å†™å°±å¤Ÿäº†ï¼Œåªæœ‰éœ€è¦ç‰¹æ®Šç”Ÿå‘½å‘¨æœŸé’©å­æ—¶æ‰ç”¨å®Œæ•´å½¢å¼ã€‚</p>
        </div>

        <hr />

        <!-- ========== 10. å…¨å±€ vs å±€éƒ¨æŒ‡ä»¤ ========== -->
        <h2>ğŸ¯ 10. å…¨å±€æŒ‡ä»¤ vs å±€éƒ¨æŒ‡ä»¤</h2>
        <div class="example-box">
            <div class="example-title">å¯¹æ¯”å…¨å±€æŒ‡ä»¤å’Œå±€éƒ¨æŒ‡ä»¤çš„åŒºåˆ«</div>
            <pre v-pre>// å…¨å±€æŒ‡ä»¤ï¼ˆæ‰€æœ‰ Vue å®ä¾‹éƒ½å¯ç”¨ï¼‰
                Vue.directive('global-directive', {
                bind(el, binding) {
                    // ...
                }
                });

                // å±€éƒ¨æŒ‡ä»¤ï¼ˆä»…å½“å‰å®ä¾‹å¯ç”¨ï¼‰
                new Vue({
                directives: {
                    'local-directive': {
                    bind(el, binding) {
                        // ...
                    }
                    }
                }
                });
            </pre>

            <div class="result">
                <div>
                    <p><strong>å…¨å±€æŒ‡ä»¤ç¤ºä¾‹ï¼ˆv-focus, v-color ç­‰ï¼‰ï¼š</strong></p>
                    <input v-focus type="text" placeholder="ä½¿ç”¨å…¨å±€ v-focus æŒ‡ä»¤" style="margin: 10px 0;" />
                </div>
                <div>
                    <p><strong>å±€éƒ¨æŒ‡ä»¤ç¤ºä¾‹ï¼ˆv-highlightï¼‰ï¼š</strong></p>
                    <p v-highlight style="padding: 10px; margin: 10px 0;">è¿™æ®µæ–‡å­—ä½¿ç”¨äº†å±€éƒ¨ v-highlight æŒ‡ä»¤</p>
                </div>
            </div>
        </div>

        <div class="note">
            <div class="note-title">ğŸ’¡ å…¨å±€ vs å±€éƒ¨æŒ‡ä»¤é€‰æ‹©å»ºè®®</div>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li><strong>å…¨å±€æŒ‡ä»¤</strong>ï¼šé€‚ç”¨äºæ•´ä¸ªåº”ç”¨éƒ½ä¼šç”¨åˆ°çš„æŒ‡ä»¤ï¼ˆå¦‚ v-focusã€v-copyï¼‰</li>
                <li><strong>å±€éƒ¨æŒ‡ä»¤</strong>ï¼šé€‚ç”¨äºç‰¹å®šç»„ä»¶æˆ–é¡µé¢çš„æŒ‡ä»¤ï¼ˆå¦‚ v-highlightï¼‰</li>
                <li><strong>ä¼˜å…ˆçº§</strong>ï¼šå±€éƒ¨æŒ‡ä»¤ä¼˜å…ˆçº§é«˜äºå…¨å±€æŒ‡ä»¤</li>
                <li><strong>å‘½åè§„èŒƒ</strong>ï¼šä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦ï¼ˆå¦‚ v-my-directiveï¼‰</li>
            </ul>
        </div>

        <hr />

        <!-- ========== æ€»ç»“ ========== -->
        <div class="note success-note">
            <div class="note-title">ğŸ“š è‡ªå®šä¹‰æŒ‡ä»¤çŸ¥è¯†æ€»ç»“</div>
            <table>
                <tr>
                    <th>æŒ‡ä»¤å</th>
                    <th>ä½œç”¨</th>
                    <th>å®é™…åº”ç”¨åœºæ™¯</th>
                </tr>
                <tr>
                    <td><code>v-focus</code></td>
                    <td>è‡ªåŠ¨èšç„¦</td>
                    <td>ç™»å½•é¡µé¢ã€æœç´¢æ¡†</td>
                </tr>
                <tr>
                    <td><code>v-color</code></td>
                    <td>åŠ¨æ€é¢œè‰²</td>
                    <td>ä¸»é¢˜åˆ‡æ¢ã€çŠ¶æ€æ ‡è¯†</td>
                </tr>
                <tr>
                    <td><code>v-copy</code></td>
                    <td>ä¸€é”®å¤åˆ¶</td>
                    <td>åˆ†äº«é“¾æ¥ã€å£ä»¤å¤åˆ¶</td>
                </tr>
                <tr>
                    <td><code>v-drag</code></td>
                    <td>å…ƒç´ æ‹–æ‹½</td>
                    <td>å¼¹çª—æ‹–æ‹½ã€å¸ƒå±€è°ƒæ•´</td>
                </tr>
                <tr>
                    <td><code>v-permission</code></td>
                    <td>æƒé™æ§åˆ¶</td>
                    <td>æŒ‰é’®æƒé™ã€èœå•æ˜¾ç¤º</td>
                </tr>
                <tr>
                    <td><code>v-debounce</code></td>
                    <td>é˜²æŠ–å¤„ç†</td>
                    <td>æœç´¢è¾“å…¥ã€è¡¨å•æäº¤</td>
                </tr>
                <tr>
                    <td><code>v-longpress</code></td>
                    <td>é•¿æŒ‰è§¦å‘</td>
                    <td>åˆ é™¤ç¡®è®¤ã€å¿«æ·æ“ä½œ</td>
                </tr>
                <tr>
                    <td><code>v-emoji</code></td>
                    <td>é™åˆ¶è¡¨æƒ…</td>
                    <td>ç”¨æˆ·åè¾“å…¥ã€è¯„è®ºè¿‡æ»¤</td>
                </tr>
            </table>
        </div>

        <div class="note">
            <div class="note-title">ğŸ¯ æœ€ä½³å®è·µ</div>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li><strong>æ˜ç¡®èŒè´£</strong>ï¼šæŒ‡ä»¤ä¸“æ³¨äº DOM æ“ä½œï¼Œå¤æ‚é€»è¾‘æ”¾åœ¨ç»„ä»¶ä¸­</li>
                <li><strong>é¿å…å†²çª</strong>ï¼šæŒ‡ä»¤å‘½åä¸è¦ä¸å†…ç½®æŒ‡ä»¤é‡å¤</li>
                <li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…åœ¨æŒ‡ä»¤ä¸­è¿›è¡Œå¤§é‡è®¡ç®—æˆ–é¢‘ç¹æ“ä½œ</li>
                <li><strong>æ¸…ç†èµ„æº</strong>ï¼šåœ¨ unbind é’©å­ä¸­ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</li>
                <li><strong>ç®€å†™å½¢å¼</strong>ï¼šåªéœ€è¦ bind å’Œ update æ—¶å¯ä»¥ä½¿ç”¨å‡½æ•°ç®€å†™</li>
                <li><strong>æ–‡æ¡£è¯´æ˜</strong>ï¼šå›¢é˜Ÿå¼€å‘æ—¶è¦å†™æ¸…æ¥šæŒ‡ä»¤çš„ç”¨æ³•å’Œå‚æ•°</li>
            </ul>
        </div>

    </div>

    <script type="text/javascript">
        Vue.config.productionTip = false;

        // ========== å…¨å±€æŒ‡ä»¤å®šä¹‰ ==========

        // 1. v-focus - è‡ªåŠ¨èšç„¦
        Vue.directive('focus', {
            inserted(el) {
                el.focus();
            }
        });

        // 2. v-color - åŠ¨æ€é¢œè‰²ï¼ˆå‡½æ•°ç®€å†™å½¢å¼ï¼‰
        Vue.directive('color', function (el, binding) {
            el.style.color = binding.value;
        });

        // 3. v-copy - ä¸€é”®å¤åˆ¶
        Vue.directive('copy', {
            bind(el, binding) {
                el.addEventListener('click', () => {
                    const textarea = document.createElement('textarea');
                    textarea.value = binding.value;
                    textarea.style.position = 'fixed';
                    textarea.style.opacity = '0';
                    document.body.appendChild(textarea);
                    textarea.select();
                    try {
                        const successful = document.execCommand('copy');
                        if (successful) {
                            alert('âœ… å¤åˆ¶æˆåŠŸï¼š' + binding.value);
                        }
                    } catch (err) {
                        alert('âŒ å¤åˆ¶å¤±è´¥');
                    }
                    document.body.removeChild(textarea);
                });
            }
        });

        // 4. v-drag - å…ƒç´ æ‹–æ‹½
        Vue.directive('drag', {
            bind(el) {
                el.style.cursor = 'move';
                el.style.position = 'absolute';
                el.style.left = '50px';
                el.style.top = '50px';

                el.onmousedown = function (e) {
                    const disX = e.clientX - el.offsetLeft;
                    const disY = e.clientY - el.offsetTop;

                    document.onmousemove = function (e) {
                        const left = e.clientX - disX;
                        const top = e.clientY - disY;

                        // é™åˆ¶æ‹–æ‹½èŒƒå›´
                        const parent = el.parentElement;
                        const maxLeft = parent.offsetWidth - el.offsetWidth;
                        const maxTop = parent.offsetHeight - el.offsetHeight;

                        el.style.left = Math.max(0, Math.min(left, maxLeft)) + 'px';
                        el.style.top = Math.max(0, Math.min(top, maxTop)) + 'px';
                    };

                    document.onmouseup = function () {
                        document.onmousemove = null;
                        document.onmouseup = null;
                    };

                    return false;
                };
            }
        });

        // 5. v-permission - æƒé™æ§åˆ¶
        Vue.directive('permission', {
            inserted(el, binding, vnode) {
                const requiredRole = binding.value;
                const vm = vnode.context;

                // ä½¿ç”¨ Vue å®ä¾‹æ¥å“åº”å¼æ›´æ–°
                vm.$watch('currentRole', (newRole) => {
                    if (newRole !== requiredRole) {
                        el.style.display = 'none';
                    } else {
                        el.style.display = '';
                    }
                }, { immediate: true });
            }
        });

        // 6. v-debounce - é˜²æŠ–
        Vue.directive('debounce', {
            inserted(el, binding) {
                let timer;
                el.addEventListener('input', () => {
                    clearTimeout(timer);
                    timer = setTimeout(() => {
                        binding.value();
                    }, 500);
                });
            }
        });

        // 7. v-longpress - é•¿æŒ‰
        Vue.directive('longpress', {
            bind(el, binding) {
                let timer;

                const startPress = () => {
                    timer = setTimeout(() => {
                        binding.value();
                    }, 1000);
                };

                const cancelPress = () => {
                    clearTimeout(timer);
                };

                el.addEventListener('mousedown', startPress);
                el.addEventListener('mouseup', cancelPress);
                el.addEventListener('mouseleave', cancelPress);
            }
        });

        // 8. v-emoji - é™åˆ¶è¡¨æƒ…
        Vue.directive('emoji', {
            bind(el) {
                const input = el.tagName === 'INPUT' ? el : el.querySelector('input');
                if (!input) return;

                input.addEventListener('input', function (e) {
                    const reg = /[^\u0020-\u007E\u00A0-\u00BE\u2E80-\uA4CF\uF900-\uFAFF\uFE30-\uFE4F\uFF00-\uFFEF\u0080-\u009F\u2000-\u201f\u2026\u2022\u20ac\r\n]/g;
                    if (reg.test(this.value)) {
                        this.value = this.value.replace(reg, '');
                        // è§¦å‘ Vue çš„æ•°æ®æ›´æ–°
                        this.dispatchEvent(new Event('input'));
                    }
                });
            }
        });

        // ========== 9. ç®€å†™å½¢å¼ç¤ºä¾‹ ==========
        
        // v-bg-simple - åŠ¨æ€èƒŒæ™¯è‰²ï¼ˆç®€å†™å½¢å¼ï¼‰
        // ç®€å†™å½¢å¼ï¼šbind å’Œ update éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°
        Vue.directive('bg-simple', function(el, binding) {
            el.style.backgroundColor = binding.value;
        });

        // ========== å®Œæ•´å½¢å¼ç¤ºä¾‹ ==========
        
        // v-fade-full - æ¸å…¥åŠ¨ç”»ï¼ˆå®Œæ•´å½¢å¼ï¼‰
        Vue.directive('fade-full', {
            inserted(el) {
                // å…ƒç´ æ’å…¥æ—¶æ‰§è¡Œæ¸å…¥åŠ¨ç”»
                el.style.opacity = '0';
                el.style.transition = 'opacity 0.6s ease-in';
                
                setTimeout(() => {
                    el.style.opacity = '1';
                }, 50);
            }
        });

        // v-counter-full - è¾“å…¥æ¡†å­—ç¬¦è®¡æ•°ï¼ˆå®Œæ•´å½¢å¼ï¼‰
        Vue.directive('counter-full', {
            inserted(el) {
                // åˆ›å»ºè®¡æ•°å™¨å…ƒç´ 
                const counter = document.createElement('span');
                counter.style.position = 'absolute';
                counter.style.right = '10px';
                counter.style.top = '50%';
                counter.style.transform = 'translateY(-50%)';
                counter.style.color = '#999';
                counter.style.fontSize = '12px';
                counter.style.pointerEvents = 'none';
                
                const input = el.tagName === 'INPUT' ? el : el.querySelector('input');
                if (input) {
                    // è®¾ç½®çˆ¶å…ƒç´ ä¸ºç›¸å¯¹å®šä½
                    el.parentElement.style.position = 'relative';
                    
                    // åˆå§‹åŒ–è®¡æ•°
                    counter.textContent = input.value.length + ' å­—ç¬¦';
                    el.parentElement.appendChild(counter);
                    
                    // ä¿å­˜è®¡æ•°å™¨å…ƒç´ å¼•ç”¨ï¼Œç”¨äº unbind æ—¶æ¸…ç†
                    el._counterElement = counter;
                }
            },
            update(el) {
                // æ•°æ®æ›´æ–°æ—¶æ›´æ–°è®¡æ•°
                const input = el.tagName === 'INPUT' ? el : el.querySelector('input');
                const counter = el._counterElement;
                if (input && counter) {
                    counter.textContent = input.value.length + ' å­—ç¬¦';
                    // å­—æ•°è¶…è¿‡20æ—¶å˜çº¢
                    counter.style.color = input.value.length > 20 ? '#e74c3c' : '#999';
                }
            },
            unbind(el) {
                // æ¸…ç†è®¡æ•°å™¨å…ƒç´ 
                if (el._counterElement && el._counterElement.parentNode) {
                    el._counterElement.parentNode.removeChild(el._counterElement);
                }
            }
        });

        // ========== Vue å®ä¾‹ ==========
        const vm = new Vue({
            el: '#root',
            data: {
                // v-color æ•°æ®
                textColor: '#667eea',

                // v-copy æ•°æ®
                copyText: 'Hello Vue Custom Directive!',

                // v-permission æ•°æ®
                currentRole: 'admin',

                // v-debounce æ•°æ®
                normalInputCount: 0,
                debounceInputCount: 0,

                // v-longpress æ•°æ®
                longPressCount: 0,

                // v-emoji æ•°æ®
                normalText: '',
                emojiText: '',

                // ç®€å†™ vs å®Œæ•´å½¢å¼æ•°æ®
                bgColor: '#667eea',
                showFadeBox: false,
                counterText: ''
            },

            methods: {
                // é˜²æŠ–è¾“å…¥å¤„ç†
                handleDebounceInput() {
                    this.debounceInputCount++;
                },

                // é•¿æŒ‰å¤„ç†
                handleLongPress() {
                    this.longPressCount++;
                    alert('ğŸ‰ é•¿æŒ‰è§¦å‘æˆåŠŸï¼');
                }
            },

            // ========== å±€éƒ¨æŒ‡ä»¤å®šä¹‰ ==========
            directives: {
                // v-highlight - é«˜äº®æ˜¾ç¤ºï¼ˆå±€éƒ¨æŒ‡ä»¤ï¼‰
                highlight: {
                    inserted(el) {
                        el.style.background = 'linear-gradient(90deg, #ffd89b 0%, #19547b 100%)';
                        el.style.backgroundClip = 'text';
                        el.style.webkitBackgroundClip = 'text';
                        el.style.color = 'transparent';
                        el.style.fontWeight = 'bold';
                        el.style.fontSize = '18px';
                    }
                }
            }
        });
    </script>
</body>

</html>